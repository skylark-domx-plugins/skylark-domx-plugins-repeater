/**
 * skylark-ui-repeater - The skylark repeater widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-repeater/
 * @license MIT
 */
!function(t,e){var i=e.define,s=e.require,n="function"==typeof i&&i.amd,a=!n&&"undefined"!=typeof exports;if(!n&&!i){var o={};i=e.define=function(t,e,i){"function"==typeof i?(o[t]={factory:i,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var i=e.split("/"),s=t.split("/");i.pop();for(var n=0;n<s.length;n++)"."!=s[n]&&(".."==s[n]?i.pop():i.push(s[n]));return i.join("/")}(e,t)}),resolved:!1,exports:null},s(t)):o[t]={factory:null,resolved:!0,exports:i}},s=e.require=function(t){if(!o.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var i=o[t];if(!i.resolved){var n=[];i.deps.forEach(function(t){n.push(s(t))}),i.exports=i.factory.apply(e,n)||null,i.resolved=!0}return i.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,e){t("skylark-ui-repeater/Repeater",["skylark-langx/skylark","skylark-langx/langx","skylark-utils-dom/browser","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/geom","skylark-utils-dom/elmx","skylark-utils-dom/query","skylark-ui-swt/Widget","skylark-ui-swt/SelectList","skylark-ui-swt/ComboBox","skylark-ui-swt/SearchBox"],function(t,e,i,s,n,a,o,r,l){var h=l.inherit({klassName:"Repeater",options:{dataSource:function(t,e){e({count:0,end:0,items:[],page:0,pages:1,start:0})},defaultView:-1,dropPagingCap:10,staticHeight:-1,views:null,searchOnKeyPress:!1,allowCancel:!0},_init:function(){var t,i,s=this;this.$element=r(this._elm),this.$canvas=this.$element.find(".repeater-canvas"),this.$count=this.$element.find(".repeater-count"),this.$end=this.$element.find(".repeater-end"),this.$filters=this.$element.find(".repeater-filters"),this.$loader=this.$element.find(".repeater-loader"),this.$pageSize=this.$element.find(".repeater-itemization .selectlist"),this.$nextBtn=this.$element.find(".repeater-next"),this.$pages=this.$element.find(".repeater-pages"),this.$prevBtn=this.$element.find(".repeater-prev"),this.$primaryPaging=this.$element.find(".repeater-primaryPaging"),this.$search=this.$element.find(".repeater-search").find(".search"),this.$secondaryPaging=this.$element.find(".repeater-secondaryPaging"),this.$start=this.$element.find(".repeater-start"),this.$viewport=this.$element.find(".repeater-viewport"),this.$views=this.$element.find(".repeater-views"),this.$element.on("mousedown.bs.dropdown.data-api",'[data-toggle="dropdown"]',function(t){r(this).dropdown()}),this.currentPage=0,this.currentView=null,this.isDisabled=!1,this.infiniteScrollingCallback=function(){},this.infiniteScrollingCont=null,this.infiniteScrollingEnabled=!1,this.infiniteScrollingEnd=null,this.infiniteScrollingOptions={},this.lastPageInput=0,this.pageIncrement=0,this.resizeTimeout={},this.stamp=(new Date).getTime()+(Math.floor(100*Math.random())+1),this.storedDataSourceOpts=null,this.syncingViewButtonState=!1,this.viewOptions={},this.viewType=null,this.$filters.plugin("lark.selectlist"),this.$pageSize.plugin("lark.selectlist"),this.$primaryPaging.find(".combobox").plugin("lark.combobox"),this.$search.plugin("lark.searchbox",{searchOnKeyPress:this.options.searchOnKeyPress,allowCancel:this.options.allowCancel}),this.$filters.on("changed.fu.selectlist",function(t,e){s.$element.trigger("filtered.fu.repeater",e),s.render({clearInfinite:!0,pageIncrement:null})}),this.$nextBtn.on("click.fu.repeater",e.proxy(this.next,this)),this.$pageSize.on("changed.fu.selectlist",function(t,e){s.$element.trigger("pageSizeChanged.fu.repeater",e),s.render({pageIncrement:null})}),this.$prevBtn.on("click.fu.repeater",e.proxy(this.previous,this)),this.$primaryPaging.find(".combobox").on("changed.fu.combobox",function(t,e){s.pageInputChange(e.text,e)}),this.$search.on("searched.fu.search cleared.fu.search",function(t,e){s.$element.trigger("searchChanged.fu.repeater",e),s.render({clearInfinite:!0,pageIncrement:null})}),this.$search.on("canceled.fu.search",function(t,e){s.$element.trigger("canceled.fu.repeater",e),s.render({clearInfinite:!0,pageIncrement:null})}),this.$secondaryPaging.on("blur.fu.repeater",function(){s.pageInputChange(s.$secondaryPaging.val())}),this.$secondaryPaging.on("keyup",function(t){13===t.keyCode&&s.pageInputChange(s.$secondaryPaging.val())}),this.$views.find("input").on("change.fu.repeater",e.proxy(this.viewChanged,this)),r(window).on("resize.fu.repeater."+this.stamp,function(){clearTimeout(s.resizeTimeout),s.resizeTimeout=setTimeout(function(){s.resize(),s.$element.trigger("resized.fu.repeater")},75)}),-1!==this.options.defaultView?i=this.options.defaultView:(t=this.$views.find("label.active input"),i=t.length>0?t.val():"list"),this.setViewOptions(i),this.initViewTypes(function(){s.resize(),s.$element.trigger("resized.fu.repeater"),s.render({changeView:i})})},clear:function(t){var e=t||{};e.preserve?this.infiniteScrollingEnabled&&!e.clearInfinite||c(this.$canvas):this.$canvas.empty();var i=void 0!==e.viewChanged&&e.viewChanged,s=r.fn.repeater.viewTypes[this.viewType]||{};!i&&s.cleared&&s.cleared.call(this,{options:e})},clearPreservedDataSourceOptions:function(){this.storedDataSourceOpts=null},destroy:function(){var t;return this.$element.find("input").each(function(){r(this).attr("value",r(this).val())}),this.$canvas.empty(),t=this.$element[0].outerHTML,this.$element.find(".combobox").plugin("lark.combobox").destroy(),this.$element.find(".selectlist").plugin("lark.selectlist").destroy(),this.$element.find(".search").plugin("lark.searchbox").destroy(),this.infiniteScrollingEnabled&&r(this.infiniteScrollingCont).infinitescroll("destroy"),this.$element.remove(),r(window).off("resize.fu.repeater."+this.stamp),t},disable:function(){var t=r.fn.repeater.viewTypes[this.viewType]||{};this.$search.plugin("lark.searchbox").disable(),this.$filters.plugin("lark.selectlist").disable(),this.$views.find("label, input").addClass("disabled").attr("disabled","disabled"),this.$pageSize.plugin("lark.selectlist").disable(),this.$primaryPaging.find(".combobox").plugin("lark.combobox").disable(),this.$secondaryPaging.attr("disabled","disabled"),this.$prevBtn.attr("disabled","disabled"),this.$nextBtn.attr("disabled","disabled"),t.enabled&&t.enabled.call(this,{status:!1}),this.isDisabled=!0,this.$element.addClass("disabled"),this.$element.trigger("disabled.fu.repeater")},enable:function(){var t=r.fn.repeater.viewTypes[this.viewType]||{};this.$search.plugin("lark.searchbox").enable(),this.$filters.plugin("lark.selectlist").enable(),this.$views.find("label, input").removeClass("disabled").removeAttr("disabled"),this.$pageSize.plugin("lark.selectlist").enable(),this.$primaryPaging.find(".combobox").plugin("lark.combobox").enable(),this.$secondaryPaging.removeAttr("disabled"),this.$prevBtn.hasClass("page-end")||this.$prevBtn.removeAttr("disabled"),this.$nextBtn.hasClass("page-end")||this.$nextBtn.removeAttr("disabled"),this.$prevBtn.hasClass("page-end")&&this.$nextBtn.hasClass("page-end")&&this.$primaryPaging.plugin("lark.combobox").disable(),0!==parseInt(this.$count.html(),10)?this.$pageSize.plugin("lark.selectlist").enable():this.$pageSize.plugin("lark.selectlist").disable(),t.enabled&&t.enabled.call(this,{status:!0}),this.isDisabled=!1,this.$element.removeClass("disabled"),this.$element.trigger("enabled.fu.repeater")},getDataOptions:function(t){var i=t||{};void 0!==i.pageIncrement&&(null===i.pageIncrement?this.currentPage=0:this.currentPage+=i.pageIncrement);var s={};i.dataSourceOptions&&(s=i.dataSourceOptions,i.preserveDataSourceOptions&&(this.storedDataSourceOpts?this.storedDataSourceOpts=e.mixin(this.storedDataSourceOpts,s):this.storedDataSourceOpts=s)),this.storedDataSourceOpts&&(s=e.mixin(this.storedDataSourceOpts,s));var n={view:this.currentView,pageIndex:this.currentPage,filter:{text:"All",value:"all"}};this.$filters.length>0&&(n.filter=this.$filters.plugin("lark.selectlist").selectedItem()),this.infiniteScrollingEnabled||(n.pageSize=25,this.$pageSize.length>0&&(n.pageSize=parseInt(this.$pageSize.plugin("lark.selectlist").selectedItem().value,10)));var a=this.$search&&this.$search.find("input")&&this.$search.find("input").val();""!==a&&(n.search=a);var o=r.fn.repeater.viewTypes[this.viewType]||{},l=o.dataOptions;return l&&(n=l.call(this,n)),n=e.mixin(n,s)},infiniteScrolling:function(t,e){var i=this.$element.find(".repeater-footer"),s=this.$element.find(".repeater-viewport"),n=e||{};if(t)this.infiniteScrollingEnabled=!0,this.infiniteScrollingEnd=n.end,delete n.dataSource,delete n.end,this.infiniteScrollingOptions=n,s.css({height:s.height()+i.outerHeight()}),i.hide();else{var a=this.infiniteScrollingCont,o=a.data();delete o.infinitescroll,a.off("scroll"),a.removeClass("infinitescroll"),this.infiniteScrollingCont=null,this.infiniteScrollingEnabled=!1,this.infiniteScrollingEnd=null,this.infiniteScrollingOptions={},s.css({height:s.height()-i.outerHeight()}),i.show()}},infiniteScrollPaging:function(t){var e=!0!==this.infiniteScrollingEnd?this.infiniteScrollingEnd:void 0,i=t.page,s=t.pages;this.currentPage=void 0!==i?i:NaN,(!0===t.end||this.currentPage+1>=s)&&this.infiniteScrollingCont.infinitescroll("end",e)},initInfiniteScrolling:function(){var t=this.$canvas.find('[data-infinite="true"]:first');if((t=t.length<1?this.$canvas:t).data("fu.infinitescroll"))t.infinitescroll("enable");else{var i=this,s=e.mixin({},this.infiniteScrollingOptions);s.dataSource=function(t,e){i.infiniteScrollingCallback=e,i.render({pageIncrement:1})},t.infinitescroll(s),this.infiniteScrollingCont=t}},initViewTypes:function(t){var e=[];for(var i in r.fn.repeater.viewTypes)({}).hasOwnProperty.call(r.fn.repeater.viewTypes,i)&&e.push(r.fn.repeater.viewTypes[i]);e.length>0?f.call(this,0,e,t):t()},itemization:function(t){this.$count.html(void 0!==t.count?t.count:"?"),this.$end.html(void 0!==t.end?t.end:"?"),this.$start.html(void 0!==t.start?t.start:"?")},next:function(){this.$nextBtn.attr("disabled","disabled"),this.$prevBtn.attr("disabled","disabled"),this.pageIncrement=1,this.$element.trigger("nextClicked.fu.repeater"),this.render({pageIncrement:this.pageIncrement})},pageInputChange:function(t,e){var i;if(t!==this.lastPageInput){this.lastPageInput=t;var s=parseInt(t,10)-1;i=s-this.currentPage,this.$element.trigger("pageChanged.fu.repeater",[s,e]),this.render({pageIncrement:i})}},pagination:function(t){this.$primaryPaging.removeClass("active"),this.$secondaryPaging.removeClass("active");var e=t.pages;this.currentPage=void 0!==t.page?t.page:NaN;var i=0===e?0:this.currentPage+1;if(e<=this.viewOptions.dropPagingCap){this.$primaryPaging.addClass("active");var s=this.$primaryPaging.find(".dropdown-menu");s.empty();for(var n=0;n<e;n++){var a=n+1;s.append('<li data-value="'+a+'"><a href="#">'+a+"</a></li>")}this.$primaryPaging.find("input.form-control").val(i)}else this.$secondaryPaging.addClass("active"),this.$secondaryPaging.val(i);this.lastPageInput=this.currentPage+1+"",this.$pages.html(""+e),this.currentPage+1<e?(this.$nextBtn.removeAttr("disabled"),this.$nextBtn.removeClass("page-end")):(this.$nextBtn.attr("disabled","disabled"),this.$nextBtn.addClass("page-end")),this.currentPage-1>=0?(this.$prevBtn.removeAttr("disabled"),this.$prevBtn.removeClass("page-end")):(this.$prevBtn.attr("disabled","disabled"),this.$prevBtn.addClass("page-end")),0!==this.pageIncrement&&(this.pageIncrement>0?this.$nextBtn.is(":disabled")?this.$prevBtn.focus():this.$nextBtn.focus():this.$prevBtn.is(":disabled")?this.$nextBtn.focus():this.$prevBtn.focus())},previous:function(){this.$nextBtn.attr("disabled","disabled"),this.$prevBtn.attr("disabled","disabled"),this.pageIncrement=-1,this.$element.trigger("previousClicked.fu.repeater"),this.render({pageIncrement:this.pageIncrement})},render:function(t){this.disable();var e=!1,i=r.fn.repeater.viewTypes[this.viewType]||{},s=t||{};if(s.changeView&&this.currentView!==s.changeView){var n=this.currentView;this.currentView=s.changeView,this.viewType=this.currentView.split(".")[0],this.setViewOptions(this.currentView),this.$element.attr("data-currentview",this.currentView),this.$element.attr("data-viewtype",this.viewType),e=!0,s.viewChanged=e,this.$element.trigger("viewChanged.fu.repeater",this.currentView),this.infiniteScrollingEnabled&&this.infiniteScrolling(!1),(i=r.fn.repeater.viewTypes[this.viewType]||{}).selected&&i.selected.call(this,{prevView:n})}this.syncViewButtonState(),s.preserve=void 0!==s.preserve?s.preserve:!e,this.clear(s),(!this.infiniteScrollingEnabled||this.infiniteScrollingEnabled&&e)&&(this._throbber=this.throb({className:"loader"}));var a=this.getDataOptions(s),o=this.viewOptions.dataSource,l=this;o(a,function(t){m.call(l,{data:t,dataOptions:a,options:s,viewChanged:e,viewTypeObj:i})})},resize:function(){for(var t,e,i,s=-1===this.viewOptions.staticHeight?this.$element.attr("data-staticheight"):this.viewOptions.staticHeight,n={},a=[],o=[],l=this.$element.parentsUntil(":visible"),h=0;h<l.length&&this.$element.is(":hidden");)i=l[h],r(i).is(":hidden")&&(o.push(i.style.display),i.style.display="block",a.push(i)),h++;if(this.viewType&&(n=r.fn.repeater.viewTypes[this.viewType]||{}),void 0!==s&&!1!==s&&"false"!==s){this.$canvas.addClass("scrolling"),e={bottom:this.$viewport.css("margin-bottom"),top:this.$viewport.css("margin-top")};var d="true"===s||!0===s?this.$element.height():parseInt(s,10),c=this.$element.find(".repeater-header").outerHeight(),p=this.$element.find(".repeater-footer").outerHeight(),u="auto"===e.bottom?0:parseInt(e.bottom,10),f="auto"===e.top?0:parseInt(e.top,10);t=d-c-p-u-f,this.$viewport.outerHeight(t)}else this.$canvas.removeClass("scrolling");n.resize&&n.resize.call(this,{height:this.$element.outerHeight(),width:this.$element.outerWidth()}),a.forEach(function(t,e){t.style.display=o[e]})},renderItems:function(t,e,i){if(t.render)t.render.call(this,{container:this.$canvas,data:e},i);else{if(t.before){var s=t.before.call(this,{container:this.$canvas,data:e});p(this.$canvas,s)}var n=this.$canvas.find('[data-container="true"]:last'),a=n.length>0?n:this.$canvas;if(t.renderItem){var o,r=t.repeat||"data.items",l=r.split("."),h=l[0];if("data"===h||"this"===h){o="this"===h?this:e;for(var c=l.slice(1),u=0;u<c.length;u++){if(void 0===o[c[u]]){o=[],d("WARNING: Repeater unable to find property to iterate renderItem on.");break}o=o[c[u]]}for(var f=0;f<o.length;f++){var m=t.renderItem.call(this,{container:a,data:e,index:f,subset:o});p(a,m)}}else d('WARNING: Repeater plugin "repeat" value must start with either "data" or "this"')}if(t.after){var v=t.after.call(this,{container:this.$canvas,data:e});p(this.$canvas,v)}i(e)}},setViewOptions:function(t){var i={},s=t.split(".")[1];i=this.options.views&&(this.options.views[s]||this.options.views[t])||{},this.viewOptions=e.mixin({},this.options,i)},viewChanged:function(t){var e=r(t.target),i=e.val();this.syncingViewButtonState||(this.isDisabled||e.parents("label:first").hasClass("disabled")?this.syncViewButtonState():this.render({changeView:i,pageIncrement:null}))},syncViewButtonState:function(){var t=this.$views.find('input[value="'+this.currentView+'"]');this.syncingViewButtonState=!0,this.$views.find("input").prop("checked",!1),this.$views.find("label.active").removeClass("active"),t.length>0&&(t.prop("checked",!0),t.parents("label:first").addClass("active")),this.syncingViewButtonState=!1}}),d=function(t){window.console&&window.console.warn&&window.console.warn(t)},c=function t(e){var i=[];e.children().each(function(){var e=r(this),s=e.attr("data-preserve");"deep"===s?(e.detach(),i.push(e)):"shallow"===s&&(t(e),e.detach(),i.push(e))}),e.empty(),e.append(i)},p=function(t,e){var i;if(e&&"none"!==(i=e.action?e.action:"append")&&void 0!==e.item){var s=void 0!==e.container?r(e.container):t;s[i](e.item)}},u=function(t,e,i){var s=t+1;s<e.length?f.call(this,s,e,i):i()},f=function(t,e,i){e[t].initialize?e[t].initialize.call(this,{},function(){u.call(this,t,e,i)}):u.call(this,t,e,i)},m=function(t){var e=t.data||{};this.infiniteScrollingEnabled?this.infiniteScrollingCallback({}):(this.itemization(e),this.pagination(e));var i=this;this.renderItems(t.viewTypeObj,e,function(e){t.data=e,function(t){var e=t.data||{};this.infiniteScrollingEnabled&&((t.viewChanged||t.options.clearInfinite)&&this.initInfiniteScrolling(),this.infiniteScrollPaging(e,t.options));this._throbber&&(this._throbber.remove(),this._throbber=null);this.enable(),this.$search.trigger("rendered.fu.repeater",{data:e,options:t.dataOptions,renderOptions:t.options}),this.$element.trigger("rendered.fu.repeater",{data:e,options:t.dataOptions,renderOptions:t.options}),this.$element.trigger("loaded.fu.repeater",t.dataOptions)}.call(i,t)})};return h.prototype.runRenderer=h.prototype.renderItems,r.fn.repeater=function(t){var e,i=Array.prototype.slice.call(arguments,1),s=this.each(function(){var s=r(this),n=s.data("fu.repeater"),a="object"==typeof t&&t;n||s.data("fu.repeater",n=new h(this,a)),"string"==typeof t&&(e=n[t].apply(n,i))});return void 0===e?s:e},r.fn.repeater.viewTypes={},t.attach("ui.Repeater",h)}),t("skylark-ui-repeater/views",["./Repeater"],function(t){return t.views={}}),t("skylark-ui-repeater/views/ViewBase",["skylark-langx/langx","skylark-utils-dom/noder","../views"],function(t,e,i){var s=t.Evented.inherit({klassName:"ViewBase",options:{controlsClass:"skylarkui-repeater-controls",fullScreen:!1},init:function(t,i){var s,n=this;this.repeater=t,this.initOptions(i),this.options.fullScreen&&e.fullScreen(this.container[0]),this.repeater.on("item.running",function(t){n.container.hasClass(n.options.controlsClass)?(s=!0,n.container.removeClass(n.options.controlsClass)):s=!1}),this.repeater.on("item.running",function(t){s&&n.container.addClass(n.options.controlsClass)})},initOptions:function(e){this.options=t.mixin({},this.options,e)},close:function(){e.fullScreen()===this.container[0]&&e.fullScreen(!1)},getValue:function(){return this.getSelectedItems()}});return i.ViewBase=s}),t("skylark-ui-repeater/views/slider",["skylark-langx/langx","skylark-utils-dom/noder","../views","./ViewBase"],function(t,e,i,s){"use strict";var n=s.inherit({klassName:"SliderView",options:{container:null,slidesContainer:"div",titleElement:"h3",displayClass:"skylarkui-album-display",singleClass:"skylarkui-album-single",leftEdgeClass:"skylarkui-album-left",rightEdgeClass:"skylarkui-album-right",playingClass:"skylarkui-album-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",displayTransition:!0,clearSlides:!0,toggleControlsOnReturn:!0,toggleControlsOnSlideClick:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!1,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},console:window.console&&"function"==typeof window.console.log?window.console:{log:function(){}},support:function(t){var e,i={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},s={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};for(e in s)if(s.hasOwnProperty(e)&&void 0!==t.style[e]){i.transition=s[e],i.transition.name=e;break}function n(){var e,s,n=i.transition;document.body.appendChild(t),n&&(e=n.name.slice(0,-9)+"ransform",void 0!==t.style[e]&&(t.style[e]="translateZ(0)",s=window.getComputedStyle(t).getPropertyValue(n.prefix+"transform"),i.transform={prefix:n.prefix,name:e,translate:!0,translateZ:!!s&&"none"!==s})),void 0!==t.style.backgroundSize&&(i.backgroundSize={},t.style.backgroundSize="contain",i.backgroundSize.contain="contain"===window.getComputedStyle(t).getPropertyValue("background-size"),t.style.backgroundSize="cover",i.backgroundSize.cover="cover"===window.getComputedStyle(t).getPropertyValue("background-size")),document.body.removeChild(t)}return document.body?n():$(document).on("DOMContentLoaded",n),i}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,cancelAnimationFrame:window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,init:function(t,e){if(this.overrided(t,e),this.list=this.album.items,this.options.container=this.album.el,this.num=this.list.length,this.initStartIndex(),!1===this.initWidget())return!1;this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play()},slide:function(t,e){window.clearTimeout(this.timeout);var i,s,n,a=this.index;if(a!==t&&1!==this.num){if(e||(e=this.options.transitionSpeed),this.support.transform){for(this.options.continuous||(t=this.circle(t)),i=Math.abs(a-t)/(a-t),this.options.continuous&&(s=i,(i=-this.positions[this.circle(t)]/this.slideWidth)!==s&&(t=-i*this.num+t)),n=Math.abs(a-t)-1;n;)n-=1,this.move(this.circle((t>a?t:a)-n-1),this.slideWidth*i,0);t=this.circle(t),this.move(a,this.slideWidth*i,e),this.move(t,0,e),this.options.continuous&&this.move(this.circle(t-i),-this.slideWidth*i,0)}else t=this.circle(t),this.animate(a*-this.slideWidth,t*-this.slideWidth,e);this.onslide(t)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(t){var e=this;window.clearTimeout(this.timeout),this.interval=t||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(t,i){e.animationFrameId=e.requestAnimationFrame.call(window,function(){e.slide(t,i)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.cancelAnimationFrame&&(this.cancelAnimationFrame.call(window,this.animationFrameId),this.animationFrameId=null),this.container.removeClass(this.options.playingClass)},add:function(t){var e;for(t.concat||(t=Array.prototype.slice.call(t)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(t),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),e=this.num-t.length;e<this.num;e+=1)this.addSlide(e),this.positionSlide(e);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.unloadAllSlides(),this.slides=[]},handleClose:function(){var t=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(t.displayClass).removeClass(t.singleClass).removeClass(t.leftEdgeClass).removeClass(t.rightEdgeClass),t.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var t=this;this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,function e(i){i.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleClose())}),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(t){return(this.num+t%this.num)%this.num},move:function(t,e,i){this.translateX(t,e,i),this.positions[t]=e},translate:function(t,e,i,s){var n=this.slides[t].style,a=this.support.transition,o=this.support.transform;n[a.name+"Duration"]=s+"ms",n[o.name]="translate("+e+"px, "+i+"px)"+(o.translateZ?" translateZ(0)":"")},translateX:function(t,e,i){this.translate(t,e,0,i)},translateY:function(t,e,i){this.translate(t,0,e,i)},animate:function(t,e,i){if(i)var s=this,n=(new Date).getTime(),a=window.setInterval(function(){var o=(new Date).getTime()-n;if(o>i)return s.slidesContainer[0].style.left=e+"px",s.ontransitionend(),void window.clearInterval(a);s.slidesContainer[0].style.left=(e-t)*(Math.floor(o/i*100)/100)+t+"px"},4);else this.slidesContainer[0].style.left=e+"px"},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(t){t.which&&1===t.which&&"VIDEO"!==t.target.nodeName&&"AUDIO"!==t.target.nodeName&&(t.preventDefault(),(t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchstart(t))},onmousemove:function(t){this.touchStart&&((t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchmove(t))},onmouseup:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},onmouseout:function(t){if(this.touchStart){var e=t.target,i=t.relatedTarget;i&&(i===e||$.contains(e,i))||this.onmouseup(t)}},ontouchstart:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var e=(t.originalEvent||t).touches[0];this.touchStart={x:e.pageX,y:e.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var e,i,s=(t.originalEvent||t).touches[0],n=(t.originalEvent||t).scale,a=this.index;if(!(s.length>1||n&&1!==n))if(this.options.disableScroll&&t.preventDefault(),this.touchDelta={x:s.pageX-this.touchStart.x,y:s.pageY-this.touchStart.y},e=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(e)<Math.abs(this.touchDelta.y)),this.isScrolling)this.translateY(a,this.touchDelta.y+this.positions[a],0);else for(t.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?i=[this.circle(a+1),a,this.circle(a-1)]:(this.touchDelta.x=e/=!a&&e>0||a===this.num-1&&e<0?Math.abs(e)/this.slideWidth+1:1,i=[a],a&&i.push(a-1),a<this.num-1&&i.unshift(a+1));i.length;)a=i.pop(),this.translateX(a,e+this.positions[a],0)},ontouchend:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var e,i,s,n,a,o=this.index,r=this.options.transitionSpeed,l=this.slideWidth,h=Number(Date.now()-this.touchStart.time)<250,d=h&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>l/2,c=!o&&this.touchDelta.x>0||o===this.num-1&&this.touchDelta.x<0,p=!d&&this.options.closeOnSwipeUpOrDown&&(h&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(c=!1),e=this.touchDelta.x<0?-1:1,this.isScrolling?p?this.close():this.translateY(o,0,r):d&&!c?(i=o+e,s=o-e,n=l*e,a=-l*e,this.options.continuous?(this.move(this.circle(i),n,0),this.move(this.circle(o-2*e),a,0)):i>=0&&i<this.num&&this.move(i,n,0),this.move(o,this.positions[o]+n,r),this.move(this.circle(s),this.positions[this.circle(s)]+n,r),o=this.circle(s),this.onslide(o)):this.options.continuous?(this.move(this.circle(o-1),-l,r),this.move(o,0,r),this.move(this.circle(o+1),l,r)):(o&&this.move(o-1,-l,r),this.move(o,0,r),o<this.num-1&&this.move(o+1,l,r))},ontouchcancel:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},ontransitionend:function(t){var e=this.slides[this.index];t&&e!==t.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,e]))},oncomplete:function(t){var e,i=t.target||t.srcElement,s=i&&i.parentNode;i&&s&&(e=this.getNodeIndex(s),$(s).removeClass(this.options.slideLoadingClass),"error"===t.type?($(s).addClass(this.options.slideErrorClass),this.elements[e]=3):this.elements[e]=2,i.clientHeight>this.container[0].clientHeight&&(i.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===s&&this.play(),this.setTimeout(this.options.onslidecomplete,[e,s]))},onload:function(t){this.oncomplete(t)},onerror:function(t){this.oncomplete(t)},onkeydown:function(t){switch(t.which||t.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(t),this.toggleControls());break;case 27:this.options.closeOnEscape&&(this.close(),t.stopImmediatePropagation());break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(t),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.next())}},handleClick:function(t){var e=this.options,i=t.target||t.srcElement,s=i.parentNode;function n(t){return $(i).hasClass(t)||$(s).hasClass(t)}n(e.toggleClass)?(this.preventDefault(t),this.toggleControls()):n(e.prevClass)?(this.preventDefault(t),this.prev()):n(e.nextClass)?(this.preventDefault(t),this.next()):n(e.closeClass)?(this.preventDefault(t),this.close()):n(e.playPauseClass)?(this.preventDefault(t),this.toggleSlideshow()):s===this.slidesContainer[0]?e.closeOnSlideClick?(this.preventDefault(t),this.close()):e.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls()):s.parentNode&&s.parentNode===this.slidesContainer[0]&&e.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls())},onclick:function(t){if(!(this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)))return this.handleClick(t);delete this.touchDelta},updateEdgeClasses:function(t){t?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),t===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(t){this.options.continuous||this.updateEdgeClasses(t),this.loadElements(t),this.options.unloadElements&&this.unloadElements(t),this.setTitle(t)},onslide:function(t){this.index=t,this.handleSlide(t),this.setTimeout(this.options.onslide,[t,this.slides[t]])},setTitle:function(t){var e=this.slides[t].firstChild,i=e.title||e.alt,s=this.titleElement;s.length&&(this.titleElement.empty(),i&&s[0].appendChild(document.createTextNode(i)))},setTimeout:function(t,e,i){var s=this;return t&&window.setTimeout(function(){t.apply(s,e||[])},i||0)},createElement:function(t,e){var i=this.album.renderItem(t,e);return $(i).addClass(this.options.slideContentClass),i},loadElement:function(t){this.elements[t]||(this.slides[t].firstChild?this.elements[t]=$(this.slides[t]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[t]=1,$(this.slides[t]).addClass(this.options.slideLoadingClass),this.slides[t].appendChild(this.createElement(this.list[t],this.proxyListener))))},loadElements:function(t){var e,i=Math.min(this.num,2*this.options.preloadRange+1),s=t;for(e=0;e<i;e+=1)s+=e*(e%2==0?-1:1),s=this.circle(s),this.loadElement(s)},unloadElements:function(t){var e,i;for(e in this.elements)this.elements.hasOwnProperty(e)&&(i=Math.abs(t-e))>this.options.preloadRange&&i+this.options.preloadRange<this.num&&(this.unloadSlide(e),delete this.elements[e])},addSlide:function(t){var e=this.slidePrototype.cloneNode(!1);e.setAttribute("data-index",t),this.slidesContainer[0].appendChild(e),this.slides.push(e)},positionSlide:function(t){var e=this.slides[t];e.style.width=this.slideWidth+"px",this.support.transform&&(e.style.left=t*-this.slideWidth+"px",this.move(t,this.index>t?-this.slideWidth:this.index<t?this.slideWidth:0,0))},initSlides:function(t){var e,i;for(t||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),$(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,e=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].clientWidth,this.slideHeight=this.container[0].clientHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",e&&this.resetSlides(),i=0;i<this.num;i+=1)e&&this.addSlide(i),this.positionSlide(i);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},unloadSlide:function(t){var e,i;e=this.slides[t],null!==(i=e.firstChild)&&e.removeChild(i)},unloadAllSlides:function(){var t,e;for(t=0,e=this.slides.length;t<e;t++)this.unloadSlide(t)},toggleControls:function(){var t=this.options.controlsClass;this.container.hasClass(t)?this.container.removeClass(t):this.container.addClass(t)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(t){return parseInt(t.getAttribute("data-index"),10)},initStartIndex:function(){var t,e=this.album,i=this.options.index;if(i&&"number"!=typeof i)for(t=0;t<this.num;t+=1)if(this.list[t]===i||e.getItemUrl(this.list[t])===e.getItemUrl(i)){i=t;break}this.index=this.circle(parseInt(i,10)||0)},initEventListeners:function(){var t=this,e=this.slidesContainer;function i(e){var i=t.support.transition&&t.support.transition.end===e.type?"transitionend":e.type;t["on"+i](e)}$(window).on("resize",i),$(document.body).on("keydown",i),this.container.on("click",i),this.support.touch?e.on("touchstart touchmove touchend touchcancel",i):this.options.emulateTouchEvents&&this.support.transition&&e.on("mousedown mousemove mouseup mouseout",i),this.support.transition&&e.on(this.support.transition.end,i),this.proxyListener=i},destroyEventListeners:function(){var t=this.slidesContainer,e=this.proxyListener;$(window).off("resize",e),$(document.body).off("keydown",e),this.container.off("click",e),this.support.touch?t.off("touchstart touchmove touchend touchcancel",e):this.options.emulateTouchEvents&&this.support.transition&&t.off("mousedown mousemove mouseup mouseout",e),this.support.transition&&t.off(this.support.transition.end,e)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var t=this;return this.container=$(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,function e(i){i.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleOpen())}):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),void this.container.addClass(this.options.displayClass)):(this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1)):(this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1)},initOptions:function(e){this.overrided(t.mixin({},n.prototype.options,e)),this.num<3&&(this.options.continuous=!!this.options.continuous&&null),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}});return i.slider={name:"slider",ctor:n,templates:{default:'<div class="slides"></div><h3 class="title"></h3><a class="prev">‹</a><a class="next">›</a><a class="close">×</a><a class="play-pause"></a><ol class="indicator"></ol>'}}}),t("skylark-ui-repeater/views/carousel",["../views","./slider"],function(t,e){var i=e.ctor.inherit({klassName:"CarouselView",options:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},initOptions:function(t){var t=langx.mixin({},i.prototype.options,t);this.overrided(t)}});return t.carousel={name:"carousel",ctor:i,templates:{default:'<div class="slides"></div><h3 class="title"></h3><a class="prev">‹</a><a class="next">›</a><a class="close">×</a><a class="play-pause"></a><ol class="indicator"></ol>'}}}),t("skylark-ui-repeater/views/flipbook",[],function(){}),t("skylark-ui-repeater/views/lightbox",["skylark-langx/langx","../views","./slider"],function(t,e,i){var s=i.ctor.inherit({klassName:"LightBoxView",options:{hidePageScrollbars:!1,indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0},initOptions:function(e){var e=t.mixin({},s.prototype.options,e);this.overrided(e)},createIndicator:function(t){var e,i,s=this.album,n=this.indicatorPrototype.cloneNode(!1),a=s.getItemTitle(t),o=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(o&&(e=Album.getItemProperty(t,o)),void 0===e&&(i=t.getElementsByTagName&&$(t).find("img")[0])&&(e=i.src),e&&(n.style.backgroundImage='url("'+e+'")')),a&&(n.title=a),n},addIndicator:function(t){if(this.indicatorContainer.length){var e=this.createIndicator(this.list[t]);e.setAttribute("data-index",t),this.indicatorContainer[0].appendChild(e),this.indicators.push(e)}},setActiveIndicator:function(t){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=$(this.indicators[t]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(t){t||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),this.overrided(t)},addSlide:function(t){this.overrided(t),this.addIndicator(t)},resetSlides:function(){this.overrided(),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(t){var e=t.target||t.srcElement,i=e.parentNode;if(i===this.indicatorContainer[0])this.preventDefault(t),this.slide(this.getNodeIndex(e));else{if(i.parentNode!==this.indicatorContainer[0])return this.overrided(t);this.preventDefault(t),this.slide(this.getNodeIndex(i))}},handleSlide:function(t){this.overrided(t),this.setActiveIndicator(t)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.overrided()}});return e.lightbox={name:"lightbox",ctor:s,templates:{default:'<div class="slides"></div><h3 class="title"></h3><a class="prev">‹</a><a class="next">›</a><a class="close">×</a><ol class="indicator"></ol>'}}}),t("skylark-ui-repeater/views/masonory",[],function(){}),t("skylark-ui-repeater/views/table",["skylark-langx/langx","skylark-utils-dom/browser","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/geom","skylark-utils-dom/query","../views","./ViewBase"],function(t,e,i,s,n,a,o,r){var l=r.inherit({klassName:"TableView",options:{list_columnRendered:null,list_columnSizing:!0,list_columnSyncing:!0,list_highlightSortedColumn:!0,list_infiniteScroll:!1,list_noItemsHTML:"no items found",list_selectable:!1,list_sortClearing:!1,list_rowRendered:null,list_frozenColumns:0,list_actions:!1},clearSelectedItems:function(){this.$canvas.find(".repeater-list-check").remove(),this.$canvas.find(".repeater-list table tbody tr.selected").removeClass("selected")},highlightColumn:function(t,e){var i=this.$canvas.find(".repeater-list-wrapper > table tbody");(this.viewOptions.list_highlightSortedColumn||e)&&(i.find("td.sorted").removeClass("sorted"),i.find("tr").each(function(){var e=a(this).find("td:nth-child("+(t+1)+")").filter(function(){return!a(this).parent().hasClass("empty")});e.addClass("sorted")}))},getSelectedItems:function(){var t=[];return this.$canvas.find(".repeater-list .repeater-list-wrapper > table tbody tr.selected").each(function(){var e=a(this);t.push({data:e.data("item_data"),element:e})}),t},positionHeadings:function(){var t=this.$element.find(".repeater-list-wrapper"),e=t.offset().left,i=t.scrollLeft();i>0?t.find(".repeater-list-heading").each(function(){var t=a(this),i=t.parents("th:first").offset().left-e+"px";t.addClass("shifted").css("left",i)}):t.find(".repeater-list-heading").each(function(){a(this).removeClass("shifted").css("left","")})},setSelectedItems:function(t,e){var i,s,n,o=this.viewOptions.list_selectable,r=this,l=t;a.isArray(l)||(l=[l]);var h=function(t){s=a(this),(s.data("item_data")||{})[l[i].property]===l[i].value&&d(s,l[i].selected,t)},d=function(t,i,s){var n,a=void 0===i||i;a?(e||"multi"===o||r.list_clearSelectedItems(),t.hasClass("selected")||(t.addClass("selected"),(r.viewOptions.list_frozenColumns||"multi"===r.viewOptions.list_selectable)&&((n=r.$element.find(".frozen-column-wrapper tr:nth-child("+(s+1)+")")).addClass("selected"),n.find(".repeater-select-checkbox").addClass("checked")),r.viewOptions.list_actions&&r.$element.find(".actions-column-wrapper tr:nth-child("+(s+1)+")").addClass("selected"),t.find("td:first").prepend('<div class="repeater-list-check"><span class="glyphicon glyphicon-ok"></span></div>'))):(r.viewOptions.list_frozenColumns&&((n=r.$element.find(".frozen-column-wrapper tr:nth-child("+(s+1)+")")).addClass("selected"),n.find(".repeater-select-checkbox").removeClass("checked")),r.viewOptions.list_actions&&r.$element.find(".actions-column-wrapper tr:nth-child("+(s+1)+")").removeClass("selected"),t.find(".repeater-list-check").remove(),t.removeClass("selected"))};for(n=!0===e||"multi"===o?l.length:o&&l.length>0?1:0,i=0;i<n;i++)void 0!==l[i].index?(s=this.$canvas.find(".repeater-list .repeater-list-wrapper > table tbody tr:nth-child("+(l[i].index+1)+")")).length>0&&d(s,l[i].selected,l[i].index):void 0!==l[i].property&&void 0!==l[i].value&&this.$canvas.find(".repeater-list .repeater-list-wrapper > table tbody tr").each(h)},sizeHeadings:function(){var t=this.$element.find(".repeater-list table");t.find("thead th").each(function(){var t=a(this),e=t.find(".repeater-list-heading");e.css({height:t.outerHeight()}),e.outerWidth(e.data("forced-width")||t.outerWidth())})},setFrozenColumns:function(){var t=this.$canvas.find(".table-frozen"),e=this.$element.find(".repeater-canvas"),i=this.$element.find(".repeater-list .repeater-list-wrapper > table"),s=this.$element.find(".repeater-list"),n=this.viewOptions.list_frozenColumns,o=this;if("multi"===this.viewOptions.list_selectable&&(n+=1,e.addClass("multi-select-enabled")),t.length<1){var r=a('<div class="frozen-column-wrapper"></div>').insertBefore(i),l=i.clone().addClass("table-frozen");l.find("th:not(:lt("+n+"))").remove(),l.find("td:not(:nth-child(n+0):nth-child(-n+"+n+"))").remove();var h=l.clone().removeClass("table-frozen");h.find("tbody").remove();var d=a('<div class="frozen-thead-wrapper"></div>').append(h),c=d.find("th label.checkbox-custom.checkbox-inline");c.attr("id",c.attr("id")+"_cloned"),r.append(l),s.append(d),this.$canvas.addClass("frozen-enabled")}this.list_sizeFrozenColumns(),a(".frozen-thead-wrapper .repeater-list-heading").on("click",function(){var t=a(this).parent("th").index();t+=1,o.$element.find(".repeater-list-wrapper > table thead th:nth-child("+t+") .repeater-list-heading")[0].click()})},positionColumns:function(){var t=this.$element.find(".repeater-canvas"),e=t.scrollTop(),i=t.scrollLeft(),s=this.viewOptions.list_frozenColumns||"multi"===this.viewOptions.list_selectable,n=this.viewOptions.list_actions,a=this.$element.find(".repeater-canvas").outerWidth(),o=this.$element.find(".repeater-list .repeater-list-wrapper > table").outerWidth(),r=this.$element.find(".table-actions")?this.$element.find(".table-actions").outerWidth():0,l=o-(a-r)>=i;e>0?t.find(".repeater-list-heading").css("top",e):t.find(".repeater-list-heading").css("top","0"),i>0?(s&&(t.find(".frozen-thead-wrapper").css("left",i),t.find(".frozen-column-wrapper").css("left",i)),n&&l&&(t.find(".actions-thead-wrapper").css("right",-i),t.find(".actions-column-wrapper").css("right",-i))):(s&&(t.find(".frozen-thead-wrapper").css("left","0"),t.find(".frozen-column-wrapper").css("left","0")),n&&(t.find(".actions-thead-wrapper").css("right","0"),t.find(".actions-column-wrapper").css("right","0")))},createItemActions:function(){var t,e,i="",s=this,n=this.$element.find(".repeater-list .repeater-list-wrapper > table"),o=this.$canvas.find(".table-actions");for(t=0,e=this.viewOptions.list_actions.items.length;t<e;t++){var r=this.viewOptions.list_actions.items[t],l=r.html;i+='<li><a href="#" data-action="'+r.name+'" class="action-item"> '+l+"</a></li>"}var h='<div class="btn-group"><button type="button" class="btn btn-xs btn-default dropdown-toggle repeater-actions-button" data-toggle="dropdown" data-flip="auto" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right" role="menu">'+i+"</ul></div>";if(o.length<1){var d=a('<div class="actions-column-wrapper" style="width: '+this.list_actions_width+'px"></div>').insertBefore(n),c=n.clone().addClass("table-actions");if(c.find("th:not(:last-child)").remove(),c.find("tr td:not(:last-child)").remove(),"multi"===this.viewOptions.list_selectable||"action"===this.viewOptions.list_selectable)c.find("thead tr").html('<th><div class="repeater-list-heading">'+h+"</div></th>"),"action"!==this.viewOptions.list_selectable&&c.find("thead .btn").attr("disabled","disabled");else{var p=this.viewOptions.list_actions.label||'<span class="actions-hidden">a</span>';c.find("thead tr").addClass("empty-heading").html("<th>"+p+'<div class="repeater-list-heading">'+p+"</div></th>")}var u=c.find("td");u.each(function(t){a(this).html(h),a(this).find("a").attr("data-row",t+1)}),d.append(c),this.$canvas.addClass("actions-enabled")}this.list_sizeActionsTable(),this.$element.find(".table-actions tbody .action-item").on("click",function(t){if(!s.isDisabled){var e=a(this).data("action"),i=a(this).data("row"),n={actionName:e,rows:[i]};s.list_getActionItems(n,t)}}),this.$element.find(".table-actions thead .action-item").on("click",function(t){if(!s.isDisabled){var e=a(this).data("action"),i={actionName:e,rows:[]},n=".repeater-list-wrapper > table .selected";"action"===s.viewOptions.list_selectable&&(n=".repeater-list-wrapper > table tr"),s.$element.find(n).each(function(t){i.rows.push(t+1)}),s.list_getActionItems(i,t)}})},getActionItems:function(t,e){for(var i=[],s=a.grep(this.viewOptions.list_actions.items,function(e){return e.name===t.actionName})[0],n=0,o=t.rows.length;n<o;n++){var r=this.$canvas.find(".repeater-list-wrapper > table tbody tr:nth-child("+t.rows[n]+")");i.push({item:r,rowData:r.data("item_data")})}if(1===i.length&&(i=i[0]),s.clickAction){s.clickAction(i,function(){},e)}},sizeActionsTable:function(){var t=this.$element.find(".repeater-list table.table-actions"),e=t.find("thead tr th"),i=this.$element.find(".repeater-list-wrapper > table");e.outerHeight(i.find("thead tr th").outerHeight()),e.find(".repeater-list-heading").outerHeight(e.outerHeight()),t.find("tbody tr td:first-child").each(function(t){a(this).outerHeight(i.find("tbody tr:eq("+t+") td").outerHeight())})},sizeFrozenColumns:function(){var t=this.$element.find(".repeater-list .repeater-list-wrapper > table");this.$element.find(".repeater-list table.table-frozen tr").each(function(e){a(this).height(t.find("tr:eq("+e+")").height())});var e=t.find("td:eq(0)").outerWidth();this.$element.find(".frozen-column-wrapper, .frozen-thead-wrapper").width(e)},frozenOptionsInitialize:function(){var t=this.$element.find(".frozen-column-wrapper .checkbox-inline"),e=this.$element.find(".header-checkbox .checkbox-custom"),i=this.$element.find(".repeater-list table"),s=this;this.$element.find("tr.selectable").on("mouseover mouseleave",function(t){var e=a(this).index();e+=1,"mouseover"===t.type?i.find("tbody tr:nth-child("+e+")").addClass("hovered"):i.find("tbody tr:nth-child("+e+")").removeClass("hovered")}),e.checkbox(),t.checkbox();var n=this.$element.find(".table-frozen tbody .checkbox-inline"),o=this.$element.find(".frozen-thead-wrapper thead .checkbox-inline input");function r(t){s.list_revertingCheckbox=!0,t.checkbox("toggle"),delete s.list_revertingCheckbox}n.on("change",function(t){if(t.preventDefault(),!s.list_revertingCheckbox)if(s.isDisabled)r(a(t.currentTarget));else{var e=a(this).attr("data-row");e=parseInt(e,10)+1,s.$element.find(".repeater-list-wrapper > table tbody tr:nth-child("+e+")").click();var i=s.$element.find(".table-frozen tbody .checkbox-inline.checked").length;0===i?(o.prop("checked",!1),o.prop("indeterminate",!1)):i===n.length?(o.prop("checked",!0),o.prop("indeterminate",!1)):(o.prop("checked",!1),o.prop("indeterminate",!0))}}),o.on("change",function(e){s.list_revertingCheckbox||(s.isDisabled?r(a(e.currentTarget)):a(this).is(":checked")?(s.$element.find(".repeater-list-wrapper > table tbody tr:not(.selected)").click(),s.$element.trigger("selected.fu.repeaterList",t)):(s.$element.find(".repeater-list-wrapper > table tbody tr.selected").click(),s.$element.trigger("deselected.fu.repeaterList",t)))})},cleared:function(){this.viewOptions.list_columnSyncing&&this.list_sizeHeadings()},dataOptions:function(t){return this.list_sortDirection&&(t.sortDirection=this.list_sortDirection),this.list_sortProperty&&(t.sortProperty=this.list_sortProperty),t},enabled:function(t){this.viewOptions.list_actions&&(t.status?(this.$canvas.find(".repeater-actions-button").removeAttr("disabled"),v.call(this)):this.$canvas.find(".repeater-actions-button").attr("disabled","disabled"))},initialize:function(t,e){this.list_sortDirection=null,this.list_sortProperty=null,this.list_specialBrowserClass=m(),this.list_actions_width=void 0!==this.viewOptions.list_actions.width?this.viewOptions.list_actions.width:37,this.list_noItems=!1,e()},resize:function(){f.call(this,this.$element.find(".repeater-list-wrapper > table thead tr")),this.viewOptions.list_actions&&this.list_sizeActionsTable(),(this.viewOptions.list_frozenColumns||"multi"===this.viewOptions.list_selectable)&&this.list_sizeFrozenColumns(),this.viewOptions.list_columnSyncing&&this.list_sizeHeadings()},selected:function(){var t,e=this.viewOptions.list_infiniteScroll;this.list_firstRender=!0,this.$loader.addClass("noHeader"),e&&(t="object"==typeof e?e:{},this.infiniteScrolling(!0,t))},before:function(t){var e,i=t.container.find(".repeater-list"),s=this;return t.data.count>0?this.list_noItems=!1:this.list_noItems=!0,i.length<1&&((i=a('<div class="repeater-list '+this.list_specialBrowserClass+'" data-preserve="shallow"><div class="repeater-list-wrapper" data-infinite="true" data-preserve="shallow"><table aria-readonly="true" class="table" data-preserve="shallow" role="grid"></table></div></div>')).find(".repeater-list-wrapper").on("scroll.fu.repeaterList",function(){s.viewOptions.list_columnSyncing&&s.list_positionHeadings()}),(s.viewOptions.list_frozenColumns||s.viewOptions.list_actions||"multi"===s.viewOptions.list_selectable)&&t.container.on("scroll.fu.repeaterList",function(){s.list_positionColumns()}),t.container.append(i)),t.container.removeClass("actions-enabled actions-enabled multi-select-enabled"),e=i.find("table"),u.call(this,e,t.data),p.call(this,e,t.data),!1},renderItem:function(t){return c.call(this,t.container,t.subset,t.index),!1},after:function(){var t;return!this.viewOptions.list_frozenColumns&&"multi"!==this.viewOptions.list_selectable||this.list_noItems||this.list_setFrozenColumns(),this.viewOptions.list_actions&&!this.list_noItems&&(this.list_createItemActions(),this.list_sizeActionsTable()),!this.viewOptions.list_frozenColumns&&!this.viewOptions.list_actions&&"multi"!==this.viewOptions.list_selectable||this.list_noItems||(this.list_positionColumns(),this.list_frozenOptionsInitialize()),this.viewOptions.list_columnSyncing&&(this.list_sizeHeadings(),this.list_positionHeadings()),(t=this.$canvas.find(".repeater-list-wrapper > table .repeater-list-heading.sorted")).length>0&&this.list_highlightColumn(t.data("fu_item_index")),!1}}),h=function(t,e,i,s,n){var o=s[n].className,r=e[i][s[n].property],l=a("<td></td>"),h=s[n]._auto_width,d=s[n].property;if(!1!==this.viewOptions.list_actions&&"@_ACTIONS_@"===d&&(r='<div class="repeater-list-actions-placeholder" style="width: '+this.list_actions_width+'px"></div>'),r=void 0!==r?r:"",l.addClass(void 0!==o?o:"").append(r),void 0!==h&&l.outerWidth(h),t.append(l),"multi"===this.viewOptions.list_selectable&&"@_CHECKBOX_@"===s[n].property){var c='<label data-row="'+i+'" class="checkbox-custom checkbox-inline body-checkbox repeater-select-checkbox"><input class="sr-only" type="checkbox"></label>';l.html(c)}return l},d=function(t,e,i){var s,n,o,r,l,h="glyphicon-chevron-down",d="glyphicon-chevron-up",c=a('<div class="repeater-list-heading"><span class="glyphicon rlc"></span></div>'),p=(this.$element.attr("id")+"_"||"")+"checkall",u='<div class="repeater-list-heading header-checkbox"><label id="'+p+'" class="checkbox-custom checkbox-inline"><input class="sr-only" type="checkbox" value=""><span class="checkbox-label">&nbsp;</span></label></div>',f=a("<th></th>"),m=this;if(c.data("fu_item_index",i),c.prepend(e[i].label),f.html(c.html()).find("[id]").removeAttr("id"),"@_CHECKBOX_@"!==e[i].property?f.append(c):f.append(u),s=f.add(c),r=c.find(".glyphicon.rlc:first"),l=r.add(f.find(".glyphicon.rlc:first")),this.viewOptions.list_actions&&"@_ACTIONS_@"===e[i].property){var v=this.list_actions_width;f.css("width",v),c.css("width",v)}void 0!==(n=e[i].className)&&s.addClass(n),(o=e[i].sortable)&&(s.addClass("sortable"),c.on("click.fu.repeaterList",function(){m.isDisabled||(m.list_sortProperty="string"==typeof o?o:e[i].property,c.hasClass("sorted")?r.hasClass(d)?(l.removeClass(d).addClass(h),m.list_sortDirection="desc"):m.viewOptions.list_sortClearing?(s.removeClass("sorted"),l.removeClass(h),m.list_sortDirection=null,m.list_sortProperty=null):(l.removeClass(h).addClass(d),m.list_sortDirection="asc"):(t.find("th, .repeater-list-heading").removeClass("sorted"),l.removeClass(h).addClass(d),m.list_sortDirection="asc",s.addClass("sorted")),m.render({clearInfinite:!0,pageIncrement:null}))})),"asc"!==e[i].sortDirection&&"desc"!==e[i].sortDirection||(t.find("th, .repeater-list-heading").removeClass("sorted"),s.addClass("sortable sorted"),"asc"===e[i].sortDirection?(l.addClass(d),this.list_sortDirection="asc"):(l.addClass(h),this.list_sortDirection="desc"),this.list_sortProperty="string"==typeof o?o:e[i].property),t.append(f)},c=function(t,e,i){var s=a("<tr></tr>");if(this.viewOptions.list_selectable&&(s.data("item_data",e[i]),"action"!==this.viewOptions.list_selectable)){s.addClass("selectable"),s.attr("tabindex",0);var n=this;s.on("click.fu.repeaterList",function(){(function(t){var e="multi"===t.viewOptions.list_selectable,i=t.viewOptions.list_actions,s=t.$element;if(!t.isDisabled){var n=a(this),o=a(this).index()+1,r=s.find(".frozen-column-wrapper tr:nth-child("+o+")"),l=s.find(".actions-column-wrapper tr:nth-child("+o+")"),h=s.find(".frozen-column-wrapper tr:nth-child("+o+") .checkbox-inline");n.is(".selected")?(n.removeClass("selected"),e?(h.click(),r.removeClass("selected"),i&&l.removeClass("selected")):n.find(".repeater-list-check").remove(),s.trigger("deselected.fu.repeaterList",n)):(e?(h.click(),n.addClass("selected"),r.addClass("selected"),i&&l.addClass("selected")):(t.$canvas.find(".repeater-list-check").remove(),t.$canvas.find(".repeater-list tbody tr.selected").each(function(){a(this).removeClass("selected"),s.trigger("deselected.fu.repeaterList",a(this))}),n.find("td:first").prepend('<div class="repeater-list-check"><span class="glyphicon glyphicon-ok"></span></div>'),n.addClass("selected"),r.addClass("selected")),s.trigger("selected.fu.repeaterList",n)),v.call(t)}}).call(this,n)}),s.keyup(function(t){13===t.keyCode&&s.trigger("click.fu.repeaterList")})}this.viewOptions.list_actions&&!this.viewOptions.list_selectable&&s.data("item_data",e[i]);for(var o=[],r=0,l=this.list_columns.length;r<l;r++)o.push(h.call(this,s,e,i,this.list_columns,r));if(t.append(s),this.viewOptions.list_columnRendered)for(var d=0,c=o.length;d<c;d++)"@_CHECKBOX_@"!==this.list_columns[d].property&&"@_ACTIONS_@"!==this.list_columns[d].property&&this.viewOptions.list_columnRendered({container:s,columnAttr:this.list_columns[d].property,item:o[d],rowData:e[i]},function(){});this.viewOptions.list_rowRendered&&this.viewOptions.list_rowRendered({container:t,item:s,rowData:e[i]},function(){})},p=function(t,e){var i,s=t.find("tbody");s.length<1&&(s=a('<tbody data-container="true"></tbody>'),t.append(s)),"string"==typeof e.error&&e.error.length>0?((i=a('<tr class="empty text-danger"><td colspan="'+this.list_columns.length+'"></td></tr>')).find("td").append(e.error),s.append(i)):e.items&&e.items.length<1&&((i=a('<tr class="empty"><td colspan="'+this.list_columns.length+'"></td></tr>')).find("td").append(this.viewOptions.list_noItemsHTML),s.append(i))},u=function(t,e){var i,s,n,o=e.columns||[],r=t.find("thead");if(this.list_firstRender||function(t,e){if(!e)return!1;if(!t||e.length!==t.length)return!0;for(var i=0,s=e.length;i<s;i++){if(!t[i])return!0;for(var n in e[i])if(e[i].hasOwnProperty(n)&&t[i][n]!==e[i][n])return!0}return!1}(this.list_columns,o)||0===r.length){if(r.remove(),"multi"===this.viewOptions.list_selectable&&!this.list_noItems){o.splice(0,0,{label:"c",property:"@_CHECKBOX_@",sortable:!1})}if(this.list_columns=o,this.list_firstRender=!1,this.$loader.removeClass("noHeader"),this.viewOptions.list_actions){var l={label:this.viewOptions.list_actions.label||'<span class="actions-hidden">a</span>',property:"@_ACTIONS_@",sortable:!1,width:this.list_actions_width};o.push(l)}for(r=a('<thead data-preserve="deep"><tr></tr></thead>'),n=r.find("tr"),i=0,s=o.length;i<s;i++)d.call(this,n,o,i);if(t.prepend(r),"multi"===this.viewOptions.list_selectable&&!this.list_noItems){var h=this.$element.find(".repeater-list-wrapper .header-checkbox").outerWidth(),c=a.grep(o,function(t){return"@_CHECKBOX_@"===t.property})[0];c.width=h}f.call(this,n)}},f=function(t){var e,i,s,n,o=[],r=this;if(this.viewOptions.list_columnSizing&&(e=0,n=0,t.find("th").each(function(){var t,i=a(this);if(void 0!==r.list_columns[e].width)t=r.list_columns[e].width,i.outerWidth(t),n+=i.outerWidth(),r.list_columns[e]._auto_width=t;else{var s=i.find(".repeater-list-heading").outerWidth();o.push({col:i,index:e,minWidth:s})}e++}),(i=o.length)>0)){var l=this.$canvas.find(".repeater-list-wrapper").outerWidth();for(s=Math.floor((l-n)/i),e=0;e<i;e++)o[e].minWidth>s&&(s=o[e].minWidth),o[e].col.outerWidth(s),this.list_columns[o[e].index]._auto_width=s}},m=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE "),i=t.indexOf("Firefox");return e>0?"ie-"+parseInt(t.substring(e+5,t.indexOf(".",e)),10):i>0?"firefox":""},v=function(){var t=".repeater-list-wrapper > table .selected",e=this.$element.find(".table-actions");"action"===this.viewOptions.list_selectable&&(t=".repeater-list-wrapper > table tr"),this.$canvas.find(t).length>0?e.find("thead .btn").removeAttr("disabled"):e.find("thead .btn").attr("disabled","disabled")};return o.table={name:"table",ctor:l}}),t("skylark-ui-repeater/views/tile",["skylark-langx/langx","skylark-utils-dom/browser","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/geom","skylark-utils-dom/query","../views","./ViewBase"],function(t,e,i,s,n,a,o,r){var l=r.inherit({klassName:"TileView",options:{alignment:"left",infiniteScroll:!1,itemRendered:null,noItemsHTML:"no items found",selectable:!1,template:'<div class="thumbnail repeater-thumbnail"><img height="75" src="{{src}}" width="65"><span>{{name}}</span></div>'},clearSelectedItems:function(){this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").removeClass("selected")},getSelectedItems:function(){var t=[];return this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){t.push(a(this))}),t},setSelectedItems:function(e,i){var s,n,o,r,l=this.options.selectable,h=this;function d(){if(r===e[s].index)return n=a(this),!1;r++}function c(){(n=a(this)).is(e[s].selector)&&p(n,e[s].selected)}function p(t,e){(e=void 0===e||e)?(i||"multi"===l||h.thumbnail_clearSelectedItems(),t.addClass("selected")):t.removeClass("selected")}for(t.isArray(e)||(e=[e]),o=!0===i||"multi"===l?e.length:l&&e.length>0?1:0,s=0;s<o;s++)void 0!==e[s].index?(n=a(),r=0,this.$canvas.find(".repeater-thumbnail-cont .selectable").each(d),n.length>0&&p(n,e[s].selected)):e[s].selector&&this.$canvas.find(".repeater-thumbnail-cont .selectable").each(c)},selected:function(){var t,e=this.options.infiniteScroll;e&&(t="object"==typeof e?e:{},this.infiniteScrolling(!0,t))},before:function(t){var e,i=this.options.alignment,s=this.$canvas.find(".repeater-thumbnail-cont"),n=t.data,o={};return s.length<1?(s=a('<div class="clearfix repeater-thumbnail-cont" data-container="true" data-infinite="true" data-preserve="shallow"></div>'),i&&"none"!==i?(i={center:1,justify:1,left:1,right:1}[i]?i:"justify",s.addClass("align-"+i),this.thumbnail_injectSpacers=!0):this.thumbnail_injectSpacers=!1,o.item=s):o.action="none",n.items&&n.items.length<1?((e=a('<div class="empty"></div>')).append(this.options.noItemsHTML),s.append(e)):s.find(".empty:first").remove(),o},renderItem:function(e){var i=this.options.selectable,s=this,n=a(function(e,i){var s=!1;function n(){var n,a,o;a=i.indexOf("{{"),n=i.indexOf("}}",a+2),a>-1&&n>-1?(o=t.trim(i.substring(a+2,n)),o=void 0!==e[o]?e[o]:"",i=i.substring(0,a)+o+i.substring(n+2)):s=!0}for(;!s&&i.search("{{")>=0;)n();return i}(e.subset[e.index],this.options.template));return n.data("item_data",e.data.items[e.index]),i&&(n.addClass("selectable"),n.on("click",function(){s.isDisabled||(n.hasClass("selected")?(n.removeClass("selected"),s.$element.trigger("deselected.fu.repeaterThumbnail",n)):("multi"!==i&&s.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){var t=a(this);t.removeClass("selected"),s.$element.trigger("deselected.fu.repeaterThumbnail",t)}),n.addClass("selected"),s.$element.trigger("selected.fu.repeaterThumbnail",n)))})),e.container.append(n),this.thumbnail_injectSpacers&&n.after('<span class="spacer">&nbsp;</span>'),this.options.itemRendered&&this.options.itemRendered({container:e.container,item:n,itemData:e.subset[e.index]},function(){}),!1}});return o.tile={name:"tile",ctor:l}}),t("skylark-ui-repeater/main",["./Repeater","./views","./views/ViewBase","./views/carousel","./views/flipbook","./views/lightbox","./views/masonory","./views/slider","./views/table","./views/tile"],function(t){return t}),t("skylark-ui-repeater",["skylark-ui-repeater/main"],function(t){return t})}(i),!n){var r=s("skylark-langx/skylark");a?module.exports=r:e.skylarkjs=r}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-ui-repeater.js.map
