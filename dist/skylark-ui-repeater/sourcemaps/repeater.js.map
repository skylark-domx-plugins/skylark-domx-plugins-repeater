{"version":3,"sources":["repeater.js"],"names":["define","skylark","langx","browser","eventer","noder","geom","elmx","$","Widget","ui","old","fn","repeater","Repeater","inherit","klassName","options","dataSource","callback","count","end","items","page","pages","start","defaultView","dropPagingCap","staticHeight","views","searchOnKeyPress","allowCancel","_init","$btn","currentView","self","this","$element","_elm","$canvas","find","$count","$end","$filters","$loader","$pageSize","$nextBtn","$pages","$prevBtn","$primaryPaging","$search","$secondaryPaging","$start","$viewport","$views","on","e","dropdown","currentPage","isDisabled","infiniteScrollingCallback","infiniteScrollingCont","infiniteScrollingEnabled","infiniteScrollingEnd","infiniteScrollingOptions","lastPageInput","pageIncrement","resizeTimeout","stamp","Date","getTime","Math","floor","random","storedDataSourceOpts","syncingViewButtonState","viewOptions","viewType","selectlist","combobox","search","value","trigger","render","clearInfinite","proxy","next","previous","evt","data","pageInputChange","text","val","keyCode","viewChanged","window","clearTimeout","setTimeout","resize","loader","length","setViewOptions","initViewTypes","changeView","clear","opts","preserve","scan","empty","undefined","viewTypeObj","viewTypes","cleared","call","clearPreservedDataSourceOptions","destroy","markup","each","attr","outerHTML","infinitescroll","remove","off","disable","addClass","enabled","status","enable","removeClass","removeAttr","hasClass","parseInt","html","getDataOptions","dataSourceOptions","preserveDataSourceOptions","mixin","returnOptions","view","pageIndex","filter","pageSize","searchValue","addViewTypeData","dataOptions","infiniteScrolling","footer","viewport","css","height","outerHeight","hide","cont","show","infiniteScrollPaging","NaN","initInfiniteScrolling","helpers","key","hasOwnProperty","push","initViewType","itemization","dataFromCombobox","pageInc","pagination","totalPages","currenPageOutput","dropMenu","i","l","append","is","focus","prevView","split","selected","syncViewButtonState","repeaterPrototypeContext","beforeRender","dataSourceReturnedData","doRender","viewportMargins","currentHiddenElement","scrubbedElements","previousProperties","$hiddenElements","parentsUntil","currentElementIndex","style","bottom","top","width","outerWidth","forEach","element","renderItems","container","before","addBefore","addItem","$dataContainer","$container","renderItem","subset","objectAndPropsToRepeatOn","repeat","objectToRepeatOn","propsToRepeatOn","slice","prop","logWarn","subItemIndex","addSubItem","index","after","addAfter","curView","viewName","$selected","target","parents","$itemToCheck","msg","console","warn","keep","children","item","pres","detach","$parent","response","action","callNextInit","currentViewType","nextViewType","currentViewtype","initialize","state","d","renderOptions","prototype","runRenderer","option","methodReturn","args","Array","arguments","$set","$this","apply","defaults","Constructor","noConflict"],"mappings":"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","file":"../repeater.js","sourcesContent":["define([\r\n  \"skylark-langx/skylark\",\r\n  \"skylark-langx/langx\",\r\n  \"skylark-utils-dom/browser\",\r\n  \"skylark-utils-dom/eventer\",\r\n  \"skylark-utils-dom/noder\",\r\n  \"skylark-utils-dom/geom\",\r\n  \"skylark-utils-dom/elmx\",\r\n  \"skylark-utils-dom/query\",\r\n  \"skylark-ui-swt/Widget\",\r\n  \"skylark-fuelux/loader\",\r\n  \"skylark-fuelux/selectlist\",\r\n  \"skylark-fuelux/combobox\"  \r\n],function(skylark,langx,browser,eventer,noder,geom,elmx,$,Widget){\r\n\r\n\tvar ui = skylark.ui = skylark.ui || {};\r\n\r\n\t/*\r\n\t * Repeater\r\n\t * https://github.com/ExactTarget/fuelux\r\n\t *\r\n\t * Copyright (c) 2014 ExactTarget\r\n\t * Licensed under the BSD New license.\r\n\t */\r\n\r\n\tvar old = $.fn.repeater;\r\n\r\n\t// REPEATER CONSTRUCTOR AND PROTOTYPE\r\n\r\n\tvar Repeater = ui.Repeater = Widget.inherit({\r\n\t\tklassName: \"Repeater\",\r\n\r\n\t\toptions : {\r\n\t\t\tdataSource: function dataSource (options, callback) {\r\n\t\t\t\tcallback({ count: 0, end: 0, items: [], page: 0, pages: 1, start: 0 });\r\n\t\t\t},\r\n\t\t\tdefaultView: -1, // should be a string value. -1 means it will grab the active view from the view controls\r\n\t\t\tdropPagingCap: 10,\r\n\t\t\tstaticHeight: -1, // normally true or false. -1 means it will look for data-staticheight on the element\r\n\t\t\tviews: null, // can be set to an object to configure multiple views of the same type,\r\n\t\t\tsearchOnKeyPress: false,\r\n\t\t\tallowCancel: true\r\n\t\t},\r\n\r\n//\t\t_init : function(element,options) {\r\n\t\t_init : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar $btn;\r\n\t\t\tvar currentView;\r\n\r\n\t\t\tthis.$element = $(this._elm); //$(element);\r\n\r\n\t\t\tthis.$canvas = this.$element.find('.repeater-canvas');\r\n\t\t\tthis.$count = this.$element.find('.repeater-count');\r\n\t\t\tthis.$end = this.$element.find('.repeater-end');\r\n\t\t\tthis.$filters = this.$element.find('.repeater-filters');\r\n\t\t\tthis.$loader = this.$element.find('.repeater-loader');\r\n\t\t\tthis.$pageSize = this.$element.find('.repeater-itemization .selectlist');\r\n\t\t\tthis.$nextBtn = this.$element.find('.repeater-next');\r\n\t\t\tthis.$pages = this.$element.find('.repeater-pages');\r\n\t\t\tthis.$prevBtn = this.$element.find('.repeater-prev');\r\n\t\t\tthis.$primaryPaging = this.$element.find('.repeater-primaryPaging');\r\n\t\t\tthis.$search = this.$element.find('.repeater-search').find('.search');\r\n\t\t\tthis.$secondaryPaging = this.$element.find('.repeater-secondaryPaging');\r\n\t\t\tthis.$start = this.$element.find('.repeater-start');\r\n\t\t\tthis.$viewport = this.$element.find('.repeater-viewport');\r\n\t\t\tthis.$views = this.$element.find('.repeater-views');\r\n\r\n\t\t\tthis.$element.on('mousedown.bs.dropdown.data-api', '[data-toggle=\"dropdown\"]',function(e) {\r\n\t\t\t\t$(this).dropdown();\r\n\t\t\t}); \r\n\r\n\t\t\tthis.currentPage = 0;\r\n\t\t\tthis.currentView = null;\r\n\t\t\tthis.isDisabled = false;\r\n\t\t\tthis.infiniteScrollingCallback = function noop () {};\r\n\t\t\tthis.infiniteScrollingCont = null;\r\n\t\t\tthis.infiniteScrollingEnabled = false;\r\n\t\t\tthis.infiniteScrollingEnd = null;\r\n\t\t\tthis.infiniteScrollingOptions = {};\r\n\t\t\tthis.lastPageInput = 0;\r\n\t\t\t//this.options = langx.mixin({}, $.fn.repeater.defaults, options);\r\n\t\t\tthis.pageIncrement = 0;// store direction navigated\r\n\t\t\tthis.resizeTimeout = {};\r\n\t\t\tthis.stamp = new Date().getTime() + (Math.floor(Math.random() * 100) + 1);\r\n\t\t\tthis.storedDataSourceOpts = null;\r\n\t\t\tthis.syncingViewButtonState = false;\r\n\t\t\tthis.viewOptions = {};\r\n\t\t\tthis.viewType = null;\r\n\r\n\t\t\tthis.$filters.selectlist();\r\n\t\t\tthis.$pageSize.selectlist();\r\n\t\t\tthis.$primaryPaging.find('.combobox').combobox();\r\n\t\t\tthis.$search.search({\r\n\t\t\t\tsearchOnKeyPress: this.options.searchOnKeyPress,\r\n\t\t\t\tallowCancel: this.options.allowCancel\r\n\t\t\t});\r\n\r\n\t\t\tthis.$filters.on('changed.fu.selectlist', function onFiltersChanged (e, value) {\r\n\t\t\t\tself.$element.trigger('filtered.fu.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$nextBtn.on('click.fu.repeater', langx.proxy(this.next, this));\r\n\t\t\tthis.$pageSize.on('changed.fu.selectlist', function onPageSizeChanged (e, value) {\r\n\t\t\t\tself.$element.trigger('pageSizeChanged.fu.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$prevBtn.on('click.fu.repeater', langx.proxy(this.previous, this));\r\n\t\t\tthis.$primaryPaging.find('.combobox').on('changed.fu.combobox', function onPrimaryPagingChanged (evt, data) {\r\n\t\t\t\tself.pageInputChange(data.text, data);\r\n\t\t\t});\r\n\t\t\tthis.$search.on('searched.fu.search cleared.fu.search', function onSearched (e, value) {\r\n\t\t\t\tself.$element.trigger('searchChanged.fu.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$search.on('canceled.fu.search', function onSearchCanceled (e, value) {\r\n\t\t\t\tself.$element.trigger('canceled.fu.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.$secondaryPaging.on('blur.fu.repeater', function onSecondaryPagingBlur () {\r\n\t\t\t\tself.pageInputChange(self.$secondaryPaging.val());\r\n\t\t\t});\r\n\t\t\tthis.$secondaryPaging.on('keyup', function onSecondaryPagingKeyup (e) {\r\n\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\tself.pageInputChange(self.$secondaryPaging.val());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.$views.find('input').on('change.fu.repeater', langx.proxy(this.viewChanged, this));\r\n\r\n\t\t\t$(window).on('resize.fu.repeater.' + this.stamp, function onResizeRepeater () {\r\n\t\t\t\tclearTimeout(self.resizeTimeout);\r\n\t\t\t\tself.resizeTimeout = setTimeout(function resizeTimeout () {\r\n\t\t\t\t\tself.resize();\r\n\t\t\t\t\tself.$element.trigger('resized.fu.repeater');\r\n\t\t\t\t}, 75);\r\n\t\t\t});\r\n\r\n\t\t\tthis.$loader.loader();\r\n\t\t\tthis.$loader.loader('pause');\r\n\t\t\tif (this.options.defaultView !== -1) {\r\n\t\t\t\tcurrentView = this.options.defaultView;\r\n\t\t\t} else {\r\n\t\t\t\t$btn = this.$views.find('label.active input');\r\n\t\t\t\tcurrentView = ($btn.length > 0) ? $btn.val() : 'list';\r\n\t\t\t}\r\n\r\n\t\t\tthis.setViewOptions(currentView);\r\n\r\n\t\t\tthis.initViewTypes(function initViewTypes () {\r\n\t\t\t\tself.resize();\r\n\t\t\t\tself.$element.trigger('resized.fu.repeater');\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tchangeView: currentView\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tclear: function clear (opts) {\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (!options.preserve) {\r\n\t\t\t\t// Just trash everything because preserve is false\r\n\t\t\t\tthis.$canvas.empty();\r\n\t\t\t} else if (!this.infiniteScrollingEnabled || options.clearInfinite) {\r\n\t\t\t\t// Preserve clear only if infiniteScrolling is disabled or if specifically told to do so\r\n\t\t\t\tscan(this.$canvas);\r\n\t\t\t} // Otherwise don't clear because infiniteScrolling is enabled\r\n\r\n\t\t\t// If viewChanged and current viewTypeObj has a cleared function, call it\r\n\t\t\tvar viewChanged = (options.viewChanged !== undefined) ? options.viewChanged : false;\r\n\t\t\tvar viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tif (!viewChanged && viewTypeObj.cleared) {\r\n\t\t\t\tviewTypeObj.cleared.call(this, {\r\n\t\t\t\t\toptions: options\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclearPreservedDataSourceOptions: function clearPreservedDataSourceOptions () {\r\n\t\t\tthis.storedDataSourceOpts = null;\r\n\t\t},\r\n\r\n\t\tdestroy: function destroy () {\r\n\t\t\tvar markup;\r\n\t\t\t// set input value attrbute in markup\r\n\t\t\tthis.$element.find('input').each(function eachInput () {\r\n\t\t\t\t$(this).attr('value', $(this).val());\r\n\t\t\t});\r\n\r\n\t\t\t// empty elements to return to original markup\r\n\t\t\tthis.$canvas.empty();\r\n\t\t\tmarkup = this.$element[0].outerHTML;\r\n\r\n\t\t\t// destroy components and remove leftover\r\n\t\t\tthis.$element.find('.combobox').combobox('destroy');\r\n\t\t\tthis.$element.find('.selectlist').selectlist('destroy');\r\n\t\t\tthis.$element.find('.search').search('destroy');\r\n\t\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t\t$(this.infiniteScrollingCont).infinitescroll('destroy');\r\n\t\t\t}\r\n\r\n\t\t\tthis.$element.remove();\r\n\r\n\t\t\t// any external events\r\n\t\t\t$(window).off('resize.fu.repeater.' + this.stamp);\r\n\r\n\t\t\treturn markup;\r\n\t\t},\r\n\r\n\t\tdisable: function disable () {\r\n\t\t\tvar viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\r\n\t\t\tthis.$search.search('disable');\r\n\t\t\tthis.$filters.selectlist('disable');\r\n\t\t\tthis.$views.find('label, input').addClass('disabled').attr('disabled', 'disabled');\r\n\t\t\tthis.$pageSize.selectlist('disable');\r\n\t\t\tthis.$primaryPaging.find('.combobox').combobox('disable');\r\n\t\t\tthis.$secondaryPaging.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\r\n\t\t\tif (viewTypeObj.enabled) {\r\n\t\t\t\tviewTypeObj.enabled.call(this, {\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.isDisabled = true;\r\n\t\t\tthis.$element.addClass('disabled');\r\n\t\t\tthis.$element.trigger('disabled.fu.repeater');\r\n\t\t},\r\n\r\n\t\tenable: function enable () {\r\n\t\t\tvar viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\r\n\t\t\tthis.$search.search('enable');\r\n\t\t\tthis.$filters.selectlist('enable');\r\n\t\t\tthis.$views.find('label, input').removeClass('disabled').removeAttr('disabled');\r\n\t\t\tthis.$pageSize.selectlist('enable');\r\n\t\t\tthis.$primaryPaging.find('.combobox').combobox('enable');\r\n\t\t\tthis.$secondaryPaging.removeAttr('disabled');\r\n\r\n\t\t\tif (!this.$prevBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$prevBtn.removeAttr('disabled');\r\n\t\t\t}\r\n\t\t\tif (!this.$nextBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$nextBtn.removeAttr('disabled');\r\n\t\t\t}\r\n\r\n\t\t\t// is 0 or 1 pages, if using $primaryPaging (combobox)\r\n\t\t\t// if using selectlist allow user to use selectlist to select 0 or 1\r\n\t\t\tif (this.$prevBtn.hasClass('page-end') && this.$nextBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$primaryPaging.combobox('disable');\r\n\t\t\t}\r\n\r\n\t\t\t// if there are no items\r\n\t\t\tif (parseInt(this.$count.html(), 10) !== 0) {\r\n\t\t\t\tthis.$pageSize.selectlist('enable');\r\n\t\t\t} else {\r\n\t\t\t\tthis.$pageSize.selectlist('disable');\r\n\t\t\t}\r\n\r\n\t\t\tif (viewTypeObj.enabled) {\r\n\t\t\t\tviewTypeObj.enabled.call(this, {\r\n\t\t\t\t\tstatus: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.isDisabled = false;\r\n\t\t\tthis.$element.removeClass('disabled');\r\n\t\t\tthis.$element.trigger('enabled.fu.repeater');\r\n\t\t},\r\n\r\n\t\tgetDataOptions: function getDataOptions (opts) {\r\n\t\t\tvar options = opts || {};\r\n\t\t\tif (options.pageIncrement !== undefined) {\r\n\t\t\t\tif (options.pageIncrement === null) {\r\n\t\t\t\t\tthis.currentPage = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.currentPage += options.pageIncrement;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar dataSourceOptions = {};\r\n\t\t\tif (options.dataSourceOptions) {\r\n\t\t\t\tdataSourceOptions = options.dataSourceOptions;\r\n\r\n\t\t\t\tif (options.preserveDataSourceOptions) {\r\n\t\t\t\t\tif (this.storedDataSourceOpts) {\r\n\t\t\t\t\t\tthis.storedDataSourceOpts = langx.mixin(this.storedDataSourceOpts, dataSourceOptions);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.storedDataSourceOpts = dataSourceOptions;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.storedDataSourceOpts) {\r\n\t\t\t\tdataSourceOptions = langx.mixin(this.storedDataSourceOpts, dataSourceOptions);\r\n\t\t\t}\r\n\r\n\t\t\tvar returnOptions = {\r\n\t\t\t\tview: this.currentView,\r\n\t\t\t\tpageIndex: this.currentPage,\r\n\t\t\t\tfilter: {\r\n\t\t\t\t\ttext: 'All',\r\n\t\t\t\t\tvalue: 'all'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (this.$filters.length > 0) {\r\n\t\t\t\treturnOptions.filter = this.$filters.selectlist('selectedItem');\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.infiniteScrollingEnabled) {\r\n\t\t\t\treturnOptions.pageSize = 25;\r\n\r\n\t\t\t\tif (this.$pageSize.length > 0) {\r\n\t\t\t\t\treturnOptions.pageSize = parseInt(this.$pageSize.selectlist('selectedItem').value, 10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar searchValue = this.$search && this.$search.find('input') && this.$search.find('input').val();\r\n\t\t\tif (searchValue !== '') {\r\n\t\t\t\treturnOptions.search = searchValue;\r\n\t\t\t}\r\n\r\n\t\t\tvar viewType = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tvar addViewTypeData = viewType.dataOptions;\r\n\t\t\tif (addViewTypeData) {\r\n\t\t\t\treturnOptions = addViewTypeData.call(this, returnOptions);\r\n\t\t\t}\r\n\r\n\t\t\treturnOptions = langx.mixin(returnOptions, dataSourceOptions);\r\n\r\n\t\t\treturn returnOptions;\r\n\t\t},\r\n\r\n\t\tinfiniteScrolling: function infiniteScrolling (enable, opts) {\r\n\t\t\tvar footer = this.$element.find('.repeater-footer');\r\n\t\t\tvar viewport = this.$element.find('.repeater-viewport');\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (enable) {\r\n\t\t\t\tthis.infiniteScrollingEnabled = true;\r\n\t\t\t\tthis.infiniteScrollingEnd = options.end;\r\n\t\t\t\tdelete options.dataSource;\r\n\t\t\t\tdelete options.end;\r\n\t\t\t\tthis.infiniteScrollingOptions = options;\r\n\t\t\t\tviewport.css({\r\n\t\t\t\t\theight: viewport.height() + footer.outerHeight()\r\n\t\t\t\t});\r\n\t\t\t\tfooter.hide();\r\n\t\t\t} else {\r\n\t\t\t\tvar cont = this.infiniteScrollingCont;\r\n\t\t\t\tvar data = cont.data();\r\n\t\t\t\tdelete data.infinitescroll;\r\n\t\t\t\tcont.off('scroll');\r\n\t\t\t\tcont.removeClass('infinitescroll');\r\n\r\n\t\t\t\tthis.infiniteScrollingCont = null;\r\n\t\t\t\tthis.infiniteScrollingEnabled = false;\r\n\t\t\t\tthis.infiniteScrollingEnd = null;\r\n\t\t\t\tthis.infiniteScrollingOptions = {};\r\n\t\t\t\tviewport.css({\r\n\t\t\t\t\theight: viewport.height() - footer.outerHeight()\r\n\t\t\t\t});\r\n\t\t\t\tfooter.show();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinfiniteScrollPaging: function infiniteScrollPaging (data) {\r\n\t\t\tvar end = (this.infiniteScrollingEnd !== true) ? this.infiniteScrollingEnd : undefined;\r\n\t\t\tvar page = data.page;\r\n\t\t\tvar pages = data.pages;\r\n\r\n\t\t\tthis.currentPage = (page !== undefined) ? page : NaN;\r\n\r\n\t\t\tif (data.end === true || (this.currentPage + 1) >= pages) {\r\n\t\t\t\tthis.infiniteScrollingCont.infinitescroll('end', end);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitInfiniteScrolling: function initInfiniteScrolling () {\r\n\t\t\tvar cont = this.$canvas.find('[data-infinite=\"true\"]:first');\r\n\r\n\t\t\tcont = (cont.length < 1) ? this.$canvas : cont;\r\n\t\t\tif (cont.data('fu.infinitescroll')) {\r\n\t\t\t\tcont.infinitescroll('enable');\r\n\t\t\t} else {\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar opts = langx.mixin({}, this.infiniteScrollingOptions);\r\n\t\t\t\topts.dataSource = function dataSource (helpers, callback) {\r\n\t\t\t\t\tself.infiniteScrollingCallback = callback;\r\n\t\t\t\t\tself.render({\r\n\t\t\t\t\t\tpageIncrement: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tcont.infinitescroll(opts);\r\n\t\t\t\tthis.infiniteScrollingCont = cont;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitViewTypes: function initViewTypes (callback) {\r\n\t\t\tvar viewTypes = [];\r\n\r\n\t\t\tfor (var key in $.fn.repeater.viewTypes) {\r\n\t\t\t\tif ({}.hasOwnProperty.call($.fn.repeater.viewTypes, key)) {\r\n\t\t\t\t\tviewTypes.push($.fn.repeater.viewTypes[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (viewTypes.length > 0) {\r\n\t\t\t\tinitViewType.call(this, 0, viewTypes, callback);\r\n\t\t\t} else {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\titemization: function itemization (data) {\r\n\t\t\tthis.$count.html((data.count !== undefined) ? data.count : '?');\r\n\t\t\tthis.$end.html((data.end !== undefined) ? data.end : '?');\r\n\t\t\tthis.$start.html((data.start !== undefined) ? data.start : '?');\r\n\t\t},\r\n\r\n\t\tnext: function next () {\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.pageIncrement = 1;\r\n\t\t\tthis.$element.trigger('nextClicked.fu.repeater');\r\n\t\t\tthis.render({\r\n\t\t\t\tpageIncrement: this.pageIncrement\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tpageInputChange: function pageInputChange (val, dataFromCombobox) {\r\n\t\t\t// dataFromCombobox is a proxy for data from combobox's changed event,\r\n\t\t\t// if no combobox is present data will be undefined\r\n\t\t\tvar pageInc;\r\n\t\t\tif (val !== this.lastPageInput) {\r\n\t\t\t\tthis.lastPageInput = val;\r\n\t\t\t\tvar value = parseInt(val, 10) - 1;\r\n\t\t\t\tpageInc = value - this.currentPage;\r\n\t\t\t\tthis.$element.trigger('pageChanged.fu.repeater', [value, dataFromCombobox]);\r\n\t\t\t\tthis.render({\r\n\t\t\t\t\tpageIncrement: pageInc\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpagination: function pagination (data) {\r\n\t\t\tthis.$primaryPaging.removeClass('active');\r\n\t\t\tthis.$secondaryPaging.removeClass('active');\r\n\r\n\t\t\tvar totalPages = data.pages;\r\n\t\t\tthis.currentPage = (data.page !== undefined) ? data.page : NaN;\r\n\t\t\t// set paging to 0 if total pages is 0, otherwise use one-based index\r\n\t\t\tvar currenPageOutput = totalPages === 0 ? 0 : this.currentPage + 1;\r\n\r\n\t\t\tif (totalPages <= this.viewOptions.dropPagingCap) {\r\n\t\t\t\tthis.$primaryPaging.addClass('active');\r\n\t\t\t\tvar dropMenu = this.$primaryPaging.find('.dropdown-menu');\r\n\t\t\t\tdropMenu.empty();\r\n\t\t\t\tfor (var i = 0; i < totalPages; i++) {\r\n\t\t\t\t\tvar l = i + 1;\r\n\t\t\t\t\tdropMenu.append('<li data-value=\"' + l + '\"><a href=\"#\">' + l + '</a></li>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$primaryPaging.find('input.form-control').val(currenPageOutput);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$secondaryPaging.addClass('active');\r\n\t\t\t\tthis.$secondaryPaging.val(currenPageOutput);\r\n\t\t\t}\r\n\r\n\t\t\tthis.lastPageInput = this.currentPage + 1 + '';\r\n\r\n\t\t\tthis.$pages.html('' + totalPages);\r\n\r\n\t\t\t// this is not the last page\r\n\t\t\tif ((this.currentPage + 1) < totalPages) {\r\n\t\t\t\tthis.$nextBtn.removeAttr('disabled');\r\n\t\t\t\tthis.$nextBtn.removeClass('page-end');\r\n\t\t\t} else {\r\n\t\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\t\tthis.$nextBtn.addClass('page-end');\r\n\t\t\t}\r\n\r\n\t\t\t// this is not the first page\r\n\t\t\tif ((this.currentPage - 1) >= 0) {\r\n\t\t\t\tthis.$prevBtn.removeAttr('disabled');\r\n\t\t\t\tthis.$prevBtn.removeClass('page-end');\r\n\t\t\t} else {\r\n\t\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\t\tthis.$prevBtn.addClass('page-end');\r\n\t\t\t}\r\n\r\n\t\t\t// return focus to next/previous buttons after navigating\r\n\t\t\tif (this.pageIncrement !== 0) {\r\n\t\t\t\tif (this.pageIncrement > 0) {\r\n\t\t\t\t\tif (this.$nextBtn.is(':disabled')) {\r\n\t\t\t\t\t\t// if you can't focus, go the other way\r\n\t\t\t\t\t\tthis.$prevBtn.focus();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$nextBtn.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.$prevBtn.is(':disabled')) {\r\n\t\t\t\t\t// if you can't focus, go the other way\r\n\t\t\t\t\tthis.$nextBtn.focus();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$prevBtn.focus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tprevious: function previous () {\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.pageIncrement = -1;\r\n\t\t\tthis.$element.trigger('previousClicked.fu.repeater');\r\n\t\t\tthis.render({\r\n\t\t\t\tpageIncrement: this.pageIncrement\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// This functions more as a \"pre-render\" than a true \"render\"\r\n\t\trender: function render (opts) {\r\n\t\t\tthis.disable();\r\n\r\n\t\t\tvar viewChanged = false;\r\n\t\t\tvar viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (options.changeView && (this.currentView !== options.changeView)) {\r\n\t\t\t\tvar prevView = this.currentView;\r\n\t\t\t\tthis.currentView = options.changeView;\r\n\t\t\t\tthis.viewType = this.currentView.split('.')[0];\r\n\t\t\t\tthis.setViewOptions(this.currentView);\r\n\t\t\t\tthis.$element.attr('data-currentview', this.currentView);\r\n\t\t\t\tthis.$element.attr('data-viewtype', this.viewType);\r\n\t\t\t\tviewChanged = true;\r\n\t\t\t\toptions.viewChanged = viewChanged;\r\n\r\n\t\t\t\tthis.$element.trigger('viewChanged.fu.repeater', this.currentView);\r\n\r\n\t\t\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t\t\tthis.infiniteScrolling(false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tviewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\t\tif (viewTypeObj.selected) {\r\n\t\t\t\t\tviewTypeObj.selected.call(this, {\r\n\t\t\t\t\t\tprevView: prevView\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.syncViewButtonState();\r\n\r\n\t\t\toptions.preserve = (options.preserve !== undefined) ? options.preserve : !viewChanged;\r\n\t\t\tthis.clear(options);\r\n\r\n\t\t\tif (!this.infiniteScrollingEnabled || (this.infiniteScrollingEnabled && viewChanged)) {\r\n\t\t\t\tthis.$loader.show().loader('play');\r\n\t\t\t}\r\n\r\n\t\t\tvar dataOptions = this.getDataOptions(options);\r\n\r\n\t\t\tvar beforeRender = this.viewOptions.dataSource;\r\n\t\t\tvar repeaterPrototypeContext = this;\r\n\t\t\tbeforeRender(\r\n\t\t\t\tdataOptions,\r\n\t\t\t\t// this serves as a bridge function to pass all required data through to the actual function\r\n\t\t\t\t// that does the rendering for us.\r\n\t\t\t\tfunction callDoRender (dataSourceReturnedData) {\r\n\t\t\t\t\tdoRender.call(\r\n\t\t\t\t\t\trepeaterPrototypeContext,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdata: dataSourceReturnedData,\r\n\t\t\t\t\t\t\tdataOptions: dataOptions,\r\n\t\t\t\t\t\t\toptions: options,\r\n\t\t\t\t\t\t\tviewChanged: viewChanged,\r\n\t\t\t\t\t\t\tviewTypeObj: viewTypeObj\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tresize: function resize () {\r\n\t\t\tvar staticHeight = (this.viewOptions.staticHeight === -1) ? this.$element.attr('data-staticheight') : this.viewOptions.staticHeight;\r\n\t\t\tvar viewTypeObj = {};\r\n\t\t\tvar height;\r\n\t\t\tvar viewportMargins;\r\n\t\t\tvar scrubbedElements = [];\r\n\t\t\tvar previousProperties = [];\r\n\t\t\t//var $hiddenElements = this.$element.parentsUntil(':visible').addBack(); // del addBack() not supported by skyalrk\r\n\t\t\tvar $hiddenElements = this.$element.parentsUntil(':visible');\r\n\t\t\tvar currentHiddenElement;\r\n\t\t\tvar currentElementIndex = 0;\r\n\r\n\t\t\t// Set parents to 'display:block' until repeater is visible again\r\n\t\t\twhile (currentElementIndex < $hiddenElements.length && this.$element.is(':hidden')) {\r\n\t\t\t\tcurrentHiddenElement = $hiddenElements[currentElementIndex];\r\n\t\t\t\t// Only set display property on elements that are explicitly hidden (i.e. do not inherit it from their parent)\r\n\t\t\t\tif ($(currentHiddenElement).is(':hidden')) {\r\n\t\t\t\t\tpreviousProperties.push(currentHiddenElement.style['display']);\r\n\t\t\t\t\tcurrentHiddenElement.style['display'] = 'block';\r\n\t\t\t\t\tscrubbedElements.push(currentHiddenElement);\r\n\t\t\t\t}\r\n\t\t\t\tcurrentElementIndex++;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.viewType) {\r\n\t\t\t\tviewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\t}\r\n\r\n\t\t\tif (staticHeight !== undefined && staticHeight !== false && staticHeight !== 'false') {\r\n\t\t\t\tthis.$canvas.addClass('scrolling');\r\n\t\t\t\tviewportMargins = {\r\n\t\t\t\t\tbottom: this.$viewport.css('margin-bottom'),\r\n\t\t\t\t\ttop: this.$viewport.css('margin-top')\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar staticHeightValue = (staticHeight === 'true' || staticHeight === true) ? this.$element.height() : parseInt(staticHeight, 10);\r\n\t\t\t\tvar headerHeight = this.$element.find('.repeater-header').outerHeight();\r\n\t\t\t\tvar footerHeight = this.$element.find('.repeater-footer').outerHeight();\r\n\t\t\t\tvar bottomMargin = (viewportMargins.bottom === 'auto') ? 0 : parseInt(viewportMargins.bottom, 10);\r\n\t\t\t\tvar topMargin = (viewportMargins.top === 'auto') ? 0 : parseInt(viewportMargins.top, 10);\r\n\r\n\t\t\t\theight = staticHeightValue - headerHeight - footerHeight - bottomMargin - topMargin;\r\n\t\t\t\tthis.$viewport.outerHeight(height);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$canvas.removeClass('scrolling');\r\n\t\t\t}\r\n\r\n\t\t\tif (viewTypeObj.resize) {\r\n\t\t\t\tviewTypeObj.resize.call(this, {\r\n\t\t\t\t\theight: this.$element.outerHeight(),\r\n\t\t\t\t\twidth: this.$element.outerWidth()\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tscrubbedElements.forEach(function (element, i) {\r\n\t\t\t\telement.style['display'] = previousProperties[i];\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// e.g. \"Rows\" or \"Thumbnails\"\r\n\t\trenderItems: function renderItems (viewTypeObj, data, callback) {\r\n\t\t\tif (!viewTypeObj.render) {\r\n\t\t\t\tif (viewTypeObj.before) {\r\n\t\t\t\t\tvar addBefore = viewTypeObj.before.call(this, {\r\n\t\t\t\t\t\tcontainer: this.$canvas,\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t});\r\n\t\t\t\t\taddItem(this.$canvas, addBefore);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar $dataContainer = this.$canvas.find('[data-container=\"true\"]:last');\r\n\t\t\t\tvar $container = ($dataContainer.length > 0) ? $dataContainer : this.$canvas;\r\n\r\n\t\t\t\t// It appears that the following code would theoretically allow you to pass a deeply\r\n\t\t\t\t// nested value to \"repeat on\" to be added to the repeater.\r\n\t\t\t\t// eg. `data.foo.bar.items`\r\n\t\t\t\tif (viewTypeObj.renderItem) {\r\n\t\t\t\t\tvar subset;\r\n\t\t\t\t\tvar objectAndPropsToRepeatOnString = viewTypeObj.repeat || 'data.items';\r\n\t\t\t\t\tvar objectAndPropsToRepeatOn = objectAndPropsToRepeatOnString.split('.');\r\n\t\t\t\t\tvar objectToRepeatOn = objectAndPropsToRepeatOn[0];\r\n\r\n\t\t\t\t\tif (objectToRepeatOn === 'data' || objectToRepeatOn === 'this') {\r\n\t\t\t\t\t\tsubset = (objectToRepeatOn === 'this') ? this : data;\r\n\r\n\t\t\t\t\t\t// Extracts subset from object chain (get `items` out of `foo.bar.items`). I think....\r\n\t\t\t\t\t\tvar propsToRepeatOn = objectAndPropsToRepeatOn.slice(1);\r\n\t\t\t\t\t\tfor (var prop = 0; prop < propsToRepeatOn.length; prop++) {\r\n\t\t\t\t\t\t\tif (subset[propsToRepeatOn[prop]] !== undefined) {\r\n\t\t\t\t\t\t\t\tsubset = subset[propsToRepeatOn[prop]];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsubset = [];\r\n\t\t\t\t\t\t\t\tlogWarn('WARNING: Repeater unable to find property to iterate renderItem on.');\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var subItemIndex = 0; subItemIndex < subset.length; subItemIndex++) {\r\n\t\t\t\t\t\t\tvar addSubItem = viewTypeObj.renderItem.call(this, {\r\n\t\t\t\t\t\t\t\tcontainer: $container,\r\n\t\t\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\t\t\tindex: subItemIndex,\r\n\t\t\t\t\t\t\t\tsubset: subset\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\taddItem($container, addSubItem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlogWarn('WARNING: Repeater plugin \"repeat\" value must start with either \"data\" or \"this\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (viewTypeObj.after) {\r\n\t\t\t\t\tvar addAfter = viewTypeObj.after.call(this, {\r\n\t\t\t\t\t\tcontainer: this.$canvas,\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t});\r\n\t\t\t\t\taddItem(this.$canvas, addAfter);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcallback(data);\r\n\t\t\t} else {\r\n\t\t\t\tviewTypeObj.render.call(this, {\r\n\t\t\t\t\tcontainer: this.$canvas,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t}, callback);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetViewOptions: function setViewOptions (curView) {\r\n\t\t\tvar opts = {};\r\n\t\t\tvar viewName = curView.split('.')[1];\r\n\r\n\t\t\tif (this.options.views) {\r\n\t\t\t\topts = this.options.views[viewName] || this.options.views[curView] || {};\r\n\t\t\t} else {\r\n\t\t\t\topts = {};\r\n\t\t\t}\r\n\r\n\t\t\tthis.viewOptions = langx.mixin({}, this.options, opts);\r\n\t\t},\r\n\r\n\t\tviewChanged: function viewChanged (e) {\r\n\t\t\tvar $selected = $(e.target);\r\n\t\t\tvar val = $selected.val();\r\n\r\n\t\t\tif (!this.syncingViewButtonState) {\r\n\t\t\t\tif (this.isDisabled || $selected.parents('label:first').hasClass('disabled')) {\r\n\t\t\t\t\tthis.syncViewButtonState();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render({\r\n\t\t\t\t\t\tchangeView: val,\r\n\t\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsyncViewButtonState: function syncViewButtonState () {\r\n\t\t\tvar $itemToCheck = this.$views.find('input[value=\"' + this.currentView + '\"]');\r\n\r\n\t\t\tthis.syncingViewButtonState = true;\r\n\t\t\tthis.$views.find('input').prop('checked', false);\r\n\t\t\tthis.$views.find('label.active').removeClass('active');\r\n\r\n\t\t\tif ($itemToCheck.length > 0) {\r\n\t\t\t\t$itemToCheck.prop('checked', true);\r\n\t\t\t\t$itemToCheck.parents('label:first').addClass('active');\r\n\t\t\t}\r\n\t\t\tthis.syncingViewButtonState = false;\r\n\t\t}\r\n\t\t\r\n\t});\r\n\r\n\tvar logWarn = function logWarn (msg) {\r\n\t\tif (window.console && window.console.warn) {\r\n\t\t\twindow.console.warn(msg);\r\n\t\t}\r\n\t};\r\n\r\n\tvar scan = function scan (cont) {\r\n\t\tvar keep = [];\r\n\t\tcont.children().each(function eachContainerChild () {\r\n\t\t\tvar item = $(this);\r\n\t\t\tvar pres = item.attr('data-preserve');\r\n\t\t\tif (pres === 'deep') {\r\n\t\t\t\titem.detach();\r\n\t\t\t\tkeep.push(item);\r\n\t\t\t} else if (pres === 'shallow') {\r\n\t\t\t\tscan(item);\r\n\t\t\t\titem.detach();\r\n\t\t\t\tkeep.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tcont.empty();\r\n\t\tcont.append(keep);\r\n\t};\r\n\r\n\tvar addItem = function addItem ($parent, response) {\r\n\t\tvar action;\r\n\t\tif (response) {\r\n\t\t\taction = (response.action) ? response.action : 'append';\r\n\t\t\tif (action !== 'none' && response.item !== undefined) {\r\n\t\t\t\tvar $container = (response.container !== undefined) ? $(response.container) : $parent;\r\n\t\t\t\t$container[action](response.item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar callNextInit = function callNextInit (currentViewType, viewTypes, callback) {\r\n\t\tvar nextViewType = currentViewType + 1;\r\n\t\tif (nextViewType < viewTypes.length) {\r\n\t\t\tinitViewType.call(this, nextViewType, viewTypes, callback);\r\n\t\t} else {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t};\r\n\r\n\tvar initViewType = function initViewType (currentViewtype, viewTypes, callback) {\r\n\t\tif (viewTypes[currentViewtype].initialize) {\r\n\t\t\tviewTypes[currentViewtype].initialize.call(this, {}, function afterInitialize () {\r\n\t\t\t\tcallNextInit.call(this, currentViewtype, viewTypes, callback);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcallNextInit.call(this, currentViewtype, viewTypes, callback);\r\n\t\t}\r\n\t};\r\n\r\n\t// Does all of our cleanup post-render\r\n\tvar afterRender = function afterRender (state) {\r\n\t\tvar data = state.data || {};\r\n\r\n\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\tif (state.viewChanged || state.options.clearInfinite) {\r\n\t\t\t\tthis.initInfiniteScrolling();\r\n\t\t\t}\r\n\r\n\t\t\tthis.infiniteScrollPaging(data, state.options);\r\n\t\t}\r\n\r\n\t\tthis.$loader.hide().loader('pause');\r\n\t\tthis.enable();\r\n\r\n\t\tthis.$search.trigger('rendered.fu.repeater', {\r\n\t\t\tdata: data,\r\n\t\t\toptions: state.dataOptions,\r\n\t\t\trenderOptions: state.options\r\n\t\t});\r\n\t\tthis.$element.trigger('rendered.fu.repeater', {\r\n\t\t\tdata: data,\r\n\t\t\toptions: state.dataOptions,\r\n\t\t\trenderOptions: state.options\r\n\t\t});\r\n\r\n\t\t// for maintaining support of 'loaded' event\r\n\t\tthis.$element.trigger('loaded.fu.repeater', state.dataOptions);\r\n\t};\r\n\r\n\t// This does the actual rendering of the repeater\r\n\tvar doRender = function doRender (state) {\r\n\t\tvar data = state.data || {};\r\n\r\n\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t// pass empty object because data handled in infiniteScrollPaging method\r\n\t\t\tthis.infiniteScrollingCallback({});\r\n\t\t} else {\r\n\t\t\tthis.itemization(data);\r\n\t\t\tthis.pagination(data);\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tthis.renderItems(\r\n\t\t\tstate.viewTypeObj,\r\n\t\t\tdata,\r\n\t\t\tfunction callAfterRender (d) {\r\n\t\t\t\tstate.data = d;\r\n\t\t\t\tafterRender.call(self, state);\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\r\n\r\n\t// For backwards compatibility.\r\n\tRepeater.prototype.runRenderer = Repeater.prototype.renderItems;\r\n\r\n\t// REPEATER PLUGIN DEFINITION\r\n\r\n\t$.fn.repeater = function fnrepeater (option) {\r\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\t\tvar methodReturn;\r\n\r\n\t\tvar $set = this.each(function eachThis () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('fu.repeater');\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\t\tif (!data) {\r\n\t\t\t\t$this.data('fu.repeater', (data = new Repeater(this, options)));\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof option === 'string') {\r\n\t\t\t\tmethodReturn = data[option].apply(data, args);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t};\r\n\r\n\t$.fn.repeater.defaults = {\r\n\t\tdataSource: function dataSource (options, callback) {\r\n\t\t\tcallback({ count: 0, end: 0, items: [], page: 0, pages: 1, start: 0 });\r\n\t\t},\r\n\t\tdefaultView: -1, // should be a string value. -1 means it will grab the active view from the view controls\r\n\t\tdropPagingCap: 10,\r\n\t\tstaticHeight: -1, // normally true or false. -1 means it will look for data-staticheight on the element\r\n\t\tviews: null, // can be set to an object to configure multiple views of the same type,\r\n\t\tsearchOnKeyPress: false,\r\n\t\tallowCancel: true\r\n\t};\r\n\r\n\t$.fn.repeater.viewTypes = {};\r\n\r\n\t$.fn.repeater.Constructor = Repeater;\r\n\r\n\t$.fn.repeater.noConflict = function noConflict () {\r\n\t\t$.fn.repeater = old;\r\n\t\treturn this;\r\n\t};\r\n\r\n\r\n\treturn $.fn.repeater;\r\n\r\n});\r\n"]}