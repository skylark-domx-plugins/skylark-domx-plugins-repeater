{"version":3,"sources":["Repeater.js"],"names":["define","skylark","langx","browser","eventer","noder","geom","elmx","$","SelectList","Widget","Repeater","inherit","klassName","pluginName","options","dataSource","callback","count","end","items","page","pages","start","defaultView","dropPagingCap","staticHeight","views","searchOnKeyPress","allowCancel","addons","_init","$btn","currentView","self","this","$element","_elm","$canvas","find","$count","$end","$filters","$loader","$pageSize","$nextBtn","$pages","$prevBtn","$primaryPaging","$search","$secondaryPaging","$start","$viewport","$views","on","e","plugin","currentPage","isDisabled","infiniteScrollingCallback","infiniteScrollingCont","infiniteScrollingEnabled","infiniteScrollingEnd","infiniteScrollingOptions","lastPageInput","pageIncrement","resizeTimeout","stamp","Date","getTime","Math","floor","random","storedDataSourceOpts","syncingViewButtonState","viewType","value","trigger","render","clearInfinite","proxy","next","previous","evt","data","pageInputChange","text","val","keyCode","viewChanged","window","clearTimeout","setTimeout","resize","length","initViewTypes","changeView","clear","opts","preserve","scan","empty","undefined","_view","cleared","clearPreservedDataSourceOptions","destroy","markup","each","attr","outerHTML","infinitescroll","remove","off","disable","addClass","enabled","status","enable","removeClass","removeAttr","hasClass","parseInt","html","getDataOptions","dataSourceOptions","preserveDataSourceOptions","mixin","returnOptions","view","pageIndex","filter","selectedItem","pageSize","searchValue","search","dataOptions","infiniteScrolling","footer","viewport","css","height","outerHeight","hide","cont","show","infiniteScrollPaging","NaN","initInfiniteScrolling","helpers","_views","viewTypes","i","setting","Error","ctor","push","initViewType","call","itemization","dataFromCombobox","pageInc","pagination","totalPages","currenPageOutput","dropMenu","l","append","is","focus","prevView","split","selected","syncViewButtonState","_throbber","throb","className","beforeRender","repeaterPrototypeContext","viewTypeObj","dataSourceReturnedData","doRender","viewportMargins","currentHiddenElement","scrubbedElements","previousProperties","$hiddenElements","parentsUntil","currentElementIndex","style","bottom","top","width","outerWidth","forEach","element","renderItems","container","before","addBefore","addItem","$dataContainer","$container","renderItem","subset","objectAndPropsToRepeatOn","repeat","objectToRepeatOn","propsToRepeatOn","slice","prop","logWarn","subItemIndex","addSubItem","index","after","addAfter","$selected","target","parents","$itemToCheck","getNestedProperty","obj","property","replace","str","singleQuoteProp","doubleQuoteProp","arrayIndex","dotProp","getDataProperty","key","dataset","_","b","toUpperCase","getAttribute","toLowerCase","test","parseJSON","ignore","getItemProperty","msg","console","warn","keep","children","item","pres","detach","$parent","response","action","callNextInit","currentViewType","nextViewType","currentViewtype","initialize","state","d","renderOptions","attach"],"mappings":"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","file":"../Repeater.js","sourcesContent":["define([\r\n  \"skylark-langx/skylark\",\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-browser\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-geom\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-popups/SelectList\",\r\n  \"skylark-widgets-base/Widget\",\r\n  \"./ComboBox\",\r\n  \"./SearchBox\"  \r\n],function(skylark,langx,browser,eventer,noder,geom,elmx,$,SelectList,Widget){\r\n\r\n\t// REPEATER CONSTRUCTOR AND PROTOTYPE\r\n\r\n\tvar Repeater = Widget.inherit({\r\n\t\tklassName: \"Repeater\",\r\n\r\n\t\tpluginName: \"lark.repeater\",\r\n\r\n\t\toptions : {\r\n\t\t\tdataSource: function dataSource (options, callback) {\r\n\t\t\t\tcallback({ count: 0, end: 0, items: [], page: 0, pages: 1, start: 0 });\r\n\t\t\t},\r\n\t\t\tdefaultView: -1, // should be a string value. -1 means it will grab the active view from the view controls\r\n\t\t\tdropPagingCap: 10,\r\n\t\t\tstaticHeight: -1, // normally true or false. -1 means it will look for data-staticheight on the element\r\n\t\t\tviews: null, // can be set to an object to configure multiple views of the same type,\r\n\t\t\tsearchOnKeyPress: false,\r\n\t\t\tallowCancel: true,\r\n\r\n\t\t\taddons : {\r\n\t\t\t\tviews : [\"table\",\"tile\"]\r\n\t\t\t}\r\n\t\t},\r\n\r\n//\t\t_init : function(element,options) {\r\n\t\t_init : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar $btn;\r\n\t\t\tvar currentView;\r\n\r\n\t\t\tthis.$element = $(this._elm); //$(element);\r\n\r\n\t\t\tthis.$canvas = this.$element.find('.repeater-canvas');\r\n\t\t\tthis.$count = this.$element.find('.repeater-count');\r\n\t\t\tthis.$end = this.$element.find('.repeater-end');\r\n\t\t\tthis.$filters = this.$element.find('.repeater-filters');\r\n\t\t\tthis.$loader = this.$element.find('.repeater-loader');\r\n\t\t\tthis.$pageSize = this.$element.find('.repeater-itemization .selectlist');\r\n\t\t\tthis.$nextBtn = this.$element.find('.repeater-next');\r\n\t\t\tthis.$pages = this.$element.find('.repeater-pages');\r\n\t\t\tthis.$prevBtn = this.$element.find('.repeater-prev');\r\n\t\t\tthis.$primaryPaging = this.$element.find('.repeater-primaryPaging');\r\n\t\t\tthis.$search = this.$element.find('.repeater-search').find('.search');\r\n\t\t\tthis.$secondaryPaging = this.$element.find('.repeater-secondaryPaging');\r\n\t\t\tthis.$start = this.$element.find('.repeater-start');\r\n\t\t\tthis.$viewport = this.$element.find('.repeater-viewport');\r\n\t\t\tthis.$views = this.$element.find('.repeater-views');\r\n\r\n\t\t\tthis.$element.on('mousedown.bs.dropdown.data-api', '[data-toggle=\"dropdown\"]',function(e) {\r\n\t\t\t\t$(this).plugin(\"domx.dropdown\");\r\n\t\t\t}); \r\n\r\n\t\t\tthis.currentPage = 0;\r\n\t\t\tthis.currentView = null;\r\n\t\t\tthis.isDisabled = false;\r\n\t\t\tthis.infiniteScrollingCallback = function noop () {};\r\n\t\t\tthis.infiniteScrollingCont = null;\r\n\t\t\tthis.infiniteScrollingEnabled = false;\r\n\t\t\tthis.infiniteScrollingEnd = null;\r\n\t\t\tthis.infiniteScrollingOptions = {};\r\n\t\t\tthis.lastPageInput = 0;\r\n\t\t\t//this.options = langx.mixin({}, $.fn.repeater.defaults, options);\r\n\t\t\tthis.pageIncrement = 0;// store direction navigated\r\n\t\t\tthis.resizeTimeout = {};\r\n\t\t\tthis.stamp = new Date().getTime() + (Math.floor(Math.random() * 100) + 1);\r\n\t\t\tthis.storedDataSourceOpts = null;\r\n\t\t\tthis.syncingViewButtonState = false;\r\n//\t\t\tthis.viewOptions = {};\r\n\t\t\tthis.viewType = null;\r\n\r\n\t\t\tthis.$filters.plugin(\"domx.selectlist\");\r\n\t\t\tthis.$pageSize.plugin(\"domx.selectlist\");\r\n\t\t\tthis.$primaryPaging.find('.combobox').plugin(\"lark.combobox\");\r\n\t\t\tthis.$search.plugin(\"lark.searchbox\",{\r\n\t\t\t\tsearchOnKeyPress: this.options.searchOnKeyPress,\r\n\t\t\t\tallowCancel: this.options.allowCancel\r\n\t\t\t});\r\n\r\n\t\t\tthis.$filters.on('changed.fu.selectlist', function onFiltersChanged (e, value) {\r\n\t\t\t\tself.$element.trigger('filtered.lark.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$nextBtn.on('click.lark.repeater', langx.proxy(this.next, this));\r\n\t\t\tthis.$pageSize.on('changed.fu.selectlist', function onPageSizeChanged (e, value) {\r\n\t\t\t\tself.$element.trigger('pageSizeChanged.lark.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$prevBtn.on('click.lark.repeater', langx.proxy(this.previous, this));\r\n\t\t\tthis.$primaryPaging.find('.combobox').on('changed.fu.combobox', function onPrimaryPagingChanged (evt, data) {\r\n\t\t\t\tself.pageInputChange(data.text, data);\r\n\t\t\t});\r\n\t\t\tthis.$search.on('searched.fu.search cleared.fu.search', function onSearched (e, value) {\r\n\t\t\t\tself.$element.trigger('searchChanged.lark.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$search.on('canceled.fu.search', function onSearchCanceled (e, value) {\r\n\t\t\t\tself.$element.trigger('canceled.lark.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.$secondaryPaging.on('blur.lark.repeater', function onSecondaryPagingBlur () {\r\n\t\t\t\tself.pageInputChange(self.$secondaryPaging.val());\r\n\t\t\t});\r\n\t\t\tthis.$secondaryPaging.on('keyup', function onSecondaryPagingKeyup (e) {\r\n\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\tself.pageInputChange(self.$secondaryPaging.val());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.$views.find('input').on('change.lark.repeater', langx.proxy(this.viewChanged, this));\r\n\r\n\t\t\t$(window).on('resize.lark.repeater.' + this.stamp, function onResizeRepeater () {\r\n\t\t\t\tclearTimeout(self.resizeTimeout);\r\n\t\t\t\tself.resizeTimeout = setTimeout(function resizeTimeout () {\r\n\t\t\t\t\tself.resize();\r\n\t\t\t\t\tself.$element.trigger('resized.lark.repeater');\r\n\t\t\t\t}, 75);\r\n\t\t\t});\r\n\r\n\t\t\t//this.$loader.loader();\r\n\t\t\t//this.$loader.loader('pause');\r\n\t\t\tif (this.options.defaultView !== -1) {\r\n\t\t\t\tcurrentView = this.options.defaultView;\r\n\t\t\t} else {\r\n\t\t\t\t$btn = this.$views.find('label.active input');\r\n\t\t\t\tcurrentView = ($btn.length > 0) ? $btn.val() : 'table';\r\n\t\t\t}\r\n\r\n\t\t\t//this.setViewOptions(currentView); // by lwf\r\n\r\n\t\t\tthis.initViewTypes(function initViewTypes () {\r\n\t\t\t\tself.resize();\r\n\t\t\t\tself.$element.trigger('resized.lark.repeater');\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tchangeView: currentView\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tclear: function clear (opts) {\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (!options.preserve) {\r\n\t\t\t\t// Just trash everything because preserve is false\r\n\t\t\t\tthis.$canvas.empty();\r\n\t\t\t} else if (!this.infiniteScrollingEnabled || options.clearInfinite) {\r\n\t\t\t\t// Preserve clear only if infiniteScrolling is disabled or if specifically told to do so\r\n\t\t\t\tscan(this.$canvas);\r\n\t\t\t} // Otherwise don't clear because infiniteScrolling is enabled\r\n\r\n\t\t\t// If viewChanged and current viewTypeObj has a cleared function, call it\r\n\t\t\tvar viewChanged = (options.viewChanged !== undefined) ? options.viewChanged : false;\r\n\t\t\t/* lwf\r\n\t\t\tvar viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tif (!viewChanged && viewTypeObj.cleared) {\r\n\t\t\t\tviewTypeObj.cleared.call(this, {\r\n\t\t\t\t\toptions: options\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif (this._view) {\r\n\t\t\t\tthis._view.cleared({\r\n\t\t\t\t\toptions: options\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclearPreservedDataSourceOptions: function clearPreservedDataSourceOptions () {\r\n\t\t\tthis.storedDataSourceOpts = null;\r\n\t\t},\r\n\r\n\t\tdestroy: function destroy () {\r\n\t\t\tvar markup;\r\n\t\t\t// set input value attrbute in markup\r\n\t\t\tthis.$element.find('input').each(function eachInput () {\r\n\t\t\t\t$(this).attr('value', $(this).val());\r\n\t\t\t});\r\n\r\n\t\t\t// empty elements to return to original markup\r\n\t\t\tthis.$canvas.empty();\r\n\t\t\tmarkup = this.$element[0].outerHTML;\r\n\r\n\t\t\t// destroy components and remove leftover\r\n\t\t\tthis.$element.find('.combobox').plugin(\"lark.combobox\").destroy();\r\n\t\t\tthis.$element.find('.selectlist').plugin(\"domx.selectlist\").destroy();\r\n\t\t\tthis.$element.find('.search').plugin(\"lark.searchbox\").destroy();\r\n\t\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t\t$(this.infiniteScrollingCont).infinitescroll('destroy');\r\n\t\t\t}\r\n\r\n\t\t\tthis.$element.remove();\r\n\r\n\t\t\t// any external events\r\n\t\t\t$(window).off('resize.lark.repeater.' + this.stamp);\r\n\r\n\t\t\treturn markup;\r\n\t\t},\r\n\r\n\t\tdisable: function disable () {\r\n\t\t\t//var viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\r\n\t\t\tthis.$search.plugin(\"lark.searchbox\").disable();\r\n\t\t\tthis.$filters.plugin(\"domx.selectlist\").disable();\r\n\t\t\tthis.$views.find('label, input').addClass('disabled').attr('disabled', 'disabled');\r\n\t\t\tthis.$pageSize.plugin(\"domx.selectlist\").disable();\r\n\t\t\tthis.$primaryPaging.find('.combobox').plugin(\"lark.combobox\").disable();\r\n\t\t\tthis.$secondaryPaging.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\r\n\t\t\t/* lwf\r\n\t\t\tif (viewTypeObj.enabled) {\r\n\t\t\t\tviewTypeObj.enabled.call(this, {\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif (this._view) {\r\n\t\t\t\tthis._view.enabled({\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.isDisabled = true;\r\n\t\t\tthis.$element.addClass('disabled');\r\n\t\t\tthis.$element.trigger('disabled.lark.repeater');\r\n\t\t},\r\n\r\n\t\tenable: function enable () {\r\n\t\t\t//var viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\r\n\t\t\tthis.$search.plugin(\"lark.searchbox\").enable();\r\n\t\t\tthis.$filters.plugin(\"domx.selectlist\").enable()\r\n\t\t\tthis.$views.find('label, input').removeClass('disabled').removeAttr('disabled');\r\n\t\t\tthis.$pageSize.plugin(\"domx.selectlist\").enable()\r\n\t\t\tthis.$primaryPaging.find('.combobox').plugin(\"lark.combobox\").enable();\r\n\t\t\tthis.$secondaryPaging.removeAttr('disabled');\r\n\r\n\t\t\tif (!this.$prevBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$prevBtn.removeAttr('disabled');\r\n\t\t\t}\r\n\t\t\tif (!this.$nextBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$nextBtn.removeAttr('disabled');\r\n\t\t\t}\r\n\r\n\t\t\t// is 0 or 1 pages, if using $primaryPaging (combobox)\r\n\t\t\t// if using selectlist allow user to use selectlist to select 0 or 1\r\n\t\t\tif (this.$prevBtn.hasClass('page-end') && this.$nextBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$primaryPaging.plugin(\"lark.combobox\").disable();\r\n\t\t\t}\r\n\r\n\t\t\t// if there are no items\r\n\t\t\tif (parseInt(this.$count.html(), 10) !== 0) {\r\n\t\t\t\tthis.$pageSize.plugin(\"domx.selectlist\").enable();\r\n\t\t\t} else {\r\n\t\t\t\tthis.$pageSize.plugin(\"domx.selectlist\").disable();\r\n\t\t\t}\r\n\r\n\t\t\t/* lwf\r\n\t\t\tif (viewTypeObj.enabled) {\r\n\t\t\t\tviewTypeObj.enabled.call(this, {\r\n\t\t\t\t\tstatus: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif (this._view) {\r\n\t\t\t\tthis._view.enabled({\r\n\t\t\t\t\tstatus: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.isDisabled = false;\r\n\t\t\tthis.$element.removeClass('disabled');\r\n\t\t\tthis.$element.trigger('enabled.lark.repeater');\r\n\t\t},\r\n\r\n\t\tgetDataOptions: function getDataOptions (opts) {\r\n\t\t\tvar options = opts || {};\r\n\t\t\tif (options.pageIncrement !== undefined) {\r\n\t\t\t\tif (options.pageIncrement === null) {\r\n\t\t\t\t\tthis.currentPage = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.currentPage += options.pageIncrement;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar dataSourceOptions = {};\r\n\t\t\tif (options.dataSourceOptions) {\r\n\t\t\t\tdataSourceOptions = options.dataSourceOptions;\r\n\r\n\t\t\t\tif (options.preserveDataSourceOptions) {\r\n\t\t\t\t\tif (this.storedDataSourceOpts) {\r\n\t\t\t\t\t\tthis.storedDataSourceOpts = langx.mixin(this.storedDataSourceOpts, dataSourceOptions);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.storedDataSourceOpts = dataSourceOptions;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.storedDataSourceOpts) {\r\n\t\t\t\tdataSourceOptions = langx.mixin(this.storedDataSourceOpts, dataSourceOptions);\r\n\t\t\t}\r\n\r\n\t\t\tvar returnOptions = {\r\n\t\t\t\tview: this.currentView,\r\n\t\t\t\tpageIndex: this.currentPage,\r\n\t\t\t\tfilter: {\r\n\t\t\t\t\ttext: 'All',\r\n\t\t\t\t\tvalue: 'all'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (this.$filters.length > 0) {\r\n\t\t\t\treturnOptions.filter = this.$filters.plugin(\"domx.selectlist\").selectedItem();\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.infiniteScrollingEnabled) {\r\n\t\t\t\treturnOptions.pageSize = 25;\r\n\r\n\t\t\t\tif (this.$pageSize.length > 0) {\r\n\t\t\t\t\treturnOptions.pageSize = parseInt(this.$pageSize.plugin(\"domx.selectlist\").selectedItem().value, 10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar searchValue = this.$search && this.$search.find('input') && this.$search.find('input').val();\r\n\t\t\tif (searchValue !== '') {\r\n\t\t\t\treturnOptions.search = searchValue;\r\n\t\t\t}\r\n\r\n\t\t\t/* lwf\r\n\t\t\tvar viewType = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tvar addViewTypeData = viewType.dataOptions;\r\n\t\t\tif (addViewTypeData) {\r\n\t\t\t\treturnOptions = addViewTypeData.call(this, returnOptions);\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif (this._view) {\r\n\t\t\t\treturnOptions = this._view.dataOptions(returnOptions);\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturnOptions = langx.mixin(returnOptions, dataSourceOptions);\r\n\r\n\t\t\treturn returnOptions;\r\n\t\t},\r\n\r\n\t\tinfiniteScrolling: function infiniteScrolling (enable, opts) {\r\n\t\t\tvar footer = this.$element.find('.repeater-footer');\r\n\t\t\tvar viewport = this.$element.find('.repeater-viewport');\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (enable) {\r\n\t\t\t\tthis.infiniteScrollingEnabled = true;\r\n\t\t\t\tthis.infiniteScrollingEnd = options.end;\r\n\t\t\t\tdelete options.dataSource;\r\n\t\t\t\tdelete options.end;\r\n\t\t\t\tthis.infiniteScrollingOptions = options;\r\n\t\t\t\tviewport.css({\r\n\t\t\t\t\theight: viewport.height() + footer.outerHeight()\r\n\t\t\t\t});\r\n\t\t\t\tfooter.hide();\r\n\t\t\t} else {\r\n\t\t\t\tvar cont = this.infiniteScrollingCont;\r\n\t\t\t\tvar data = cont.data();\r\n\t\t\t\tdelete data.infinitescroll;\r\n\t\t\t\tcont.off('scroll');\r\n\t\t\t\tcont.removeClass('infinitescroll');\r\n\r\n\t\t\t\tthis.infiniteScrollingCont = null;\r\n\t\t\t\tthis.infiniteScrollingEnabled = false;\r\n\t\t\t\tthis.infiniteScrollingEnd = null;\r\n\t\t\t\tthis.infiniteScrollingOptions = {};\r\n\t\t\t\tviewport.css({\r\n\t\t\t\t\theight: viewport.height() - footer.outerHeight()\r\n\t\t\t\t});\r\n\t\t\t\tfooter.show();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinfiniteScrollPaging: function infiniteScrollPaging (data) {\r\n\t\t\tvar end = (this.infiniteScrollingEnd !== true) ? this.infiniteScrollingEnd : undefined;\r\n\t\t\tvar page = data.page;\r\n\t\t\tvar pages = data.pages;\r\n\r\n\t\t\tthis.currentPage = (page !== undefined) ? page : NaN;\r\n\r\n\t\t\tif (data.end === true || (this.currentPage + 1) >= pages) {\r\n\t\t\t\tthis.infiniteScrollingCont.infinitescroll('end', end);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitInfiniteScrolling: function initInfiniteScrolling () {\r\n\t\t\tvar cont = this.$canvas.find('[data-infinite=\"true\"]:first');\r\n\r\n\t\t\tcont = (cont.length < 1) ? this.$canvas : cont;\r\n\t\t\tif (cont.data('fu.infinitescroll')) {\r\n\t\t\t\tcont.infinitescroll('enable');\r\n\t\t\t} else {\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar opts = langx.mixin({}, this.infiniteScrollingOptions);\r\n\t\t\t\topts.dataSource = function dataSource (helpers, callback) {\r\n\t\t\t\t\tself.infiniteScrollingCallback = callback;\r\n\t\t\t\t\tself.render({\r\n\t\t\t\t\t\tpageIncrement: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tcont.infinitescroll(opts);\r\n\t\t\t\tthis.infiniteScrollingCont = cont;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitViewTypes: function initViewTypes (callback) {\r\n\t\t\t/*\r\n\t\t\tvar viewTypes = [];\r\n\r\n\t\t\tfor (var key in $.fn.repeater.viewTypes) {\r\n\t\t\t\tif ({}.hasOwnProperty.call($.fn.repeater.viewTypes, key)) {\r\n\t\t\t\t\tviewTypes.push($.fn.repeater.viewTypes[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tvar views = this._views = [];\r\n\t\t\tvar viewTypes = this.options.addons.views;\r\n\t\t\tfor (var i = 0; i< viewTypes.length; i++) {\r\n\t\t\t\tvar setting = Repeater.addons.views[viewTypes[i]];\r\n\t\t\t\tif (!setting) {\r\n\t\t\t\t\tthrow new Error(\"The view type \" + viewTypes[i] + \" is not defined!\");\r\n\t\t\t\t} \r\n\t\t\t\tvar ctor = setting.ctor;\r\n\t\t\t\tthis._views.push(this._views[viewTypes[i]] = new ctor(this));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (views.length > 0) {\r\n\t\t\t\tinitViewType.call(this, 0, viewTypes, callback);\r\n\t\t\t} else {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\titemization: function itemization (data) {\r\n\t\t\tthis.$count.html((data.count !== undefined) ? data.count : '?');\r\n\t\t\tthis.$end.html((data.end !== undefined) ? data.end : '?');\r\n\t\t\tthis.$start.html((data.start !== undefined) ? data.start : '?');\r\n\t\t},\r\n\r\n\t\tnext: function next () {\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.pageIncrement = 1;\r\n\t\t\tthis.$element.trigger('nextClicked.lark.repeater');\r\n\t\t\tthis.render({\r\n\t\t\t\tpageIncrement: this.pageIncrement\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tpageInputChange: function pageInputChange (val, dataFromCombobox) {\r\n\t\t\t// dataFromCombobox is a proxy for data from combobox's changed event,\r\n\t\t\t// if no combobox is present data will be undefined\r\n\t\t\tvar pageInc;\r\n\t\t\tif (val !== this.lastPageInput) {\r\n\t\t\t\tthis.lastPageInput = val;\r\n\t\t\t\tvar value = parseInt(val, 10) - 1;\r\n\t\t\t\tpageInc = value - this.currentPage;\r\n\t\t\t\tthis.$element.trigger('pageChanged.lark.repeater', [value, dataFromCombobox]);\r\n\t\t\t\tthis.render({\r\n\t\t\t\t\tpageIncrement: pageInc\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpagination: function pagination (data) {\r\n\t\t\tthis.$primaryPaging.removeClass('active');\r\n\t\t\tthis.$secondaryPaging.removeClass('active');\r\n\r\n\t\t\tvar totalPages = data.pages;\r\n\t\t\tthis.currentPage = (data.page !== undefined) ? data.page : NaN;\r\n\t\t\t// set paging to 0 if total pages is 0, otherwise use one-based index\r\n\t\t\tvar currenPageOutput = totalPages === 0 ? 0 : this.currentPage + 1;\r\n\r\n\t\t\tif (totalPages <= this.options.dropPagingCap) {\r\n\t\t\t\tthis.$primaryPaging.addClass('active');\r\n\t\t\t\tvar dropMenu = this.$primaryPaging.find('.dropdown-menu');\r\n\t\t\t\tdropMenu.empty();\r\n\t\t\t\tfor (var i = 0; i < totalPages; i++) {\r\n\t\t\t\t\tvar l = i + 1;\r\n\t\t\t\t\tdropMenu.append('<li data-value=\"' + l + '\"><a href=\"#\">' + l + '</a></li>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$primaryPaging.find('input.form-control').val(currenPageOutput);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$secondaryPaging.addClass('active');\r\n\t\t\t\tthis.$secondaryPaging.val(currenPageOutput);\r\n\t\t\t}\r\n\r\n\t\t\tthis.lastPageInput = this.currentPage + 1 + '';\r\n\r\n\t\t\tthis.$pages.html('' + totalPages);\r\n\r\n\t\t\t// this is not the last page\r\n\t\t\tif ((this.currentPage + 1) < totalPages) {\r\n\t\t\t\tthis.$nextBtn.removeAttr('disabled');\r\n\t\t\t\tthis.$nextBtn.removeClass('page-end');\r\n\t\t\t} else {\r\n\t\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\t\tthis.$nextBtn.addClass('page-end');\r\n\t\t\t}\r\n\r\n\t\t\t// this is not the first page\r\n\t\t\tif ((this.currentPage - 1) >= 0) {\r\n\t\t\t\tthis.$prevBtn.removeAttr('disabled');\r\n\t\t\t\tthis.$prevBtn.removeClass('page-end');\r\n\t\t\t} else {\r\n\t\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\t\tthis.$prevBtn.addClass('page-end');\r\n\t\t\t}\r\n\r\n\t\t\t// return focus to next/previous buttons after navigating\r\n\t\t\tif (this.pageIncrement !== 0) {\r\n\t\t\t\tif (this.pageIncrement > 0) {\r\n\t\t\t\t\tif (this.$nextBtn.is(':disabled')) {\r\n\t\t\t\t\t\t// if you can't focus, go the other way\r\n\t\t\t\t\t\tthis.$prevBtn.focus();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$nextBtn.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.$prevBtn.is(':disabled')) {\r\n\t\t\t\t\t// if you can't focus, go the other way\r\n\t\t\t\t\tthis.$nextBtn.focus();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$prevBtn.focus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tprevious: function previous () {\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.pageIncrement = -1;\r\n\t\t\tthis.$element.trigger('previousClicked.lark.repeater');\r\n\t\t\tthis.render({\r\n\t\t\t\tpageIncrement: this.pageIncrement\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// This functions more as a \"pre-render\" than a true \"render\"\r\n\t\trender: function render (opts) {\r\n\t\t\tthis.disable();\r\n\r\n\t\t\tvar viewChanged = false;\r\n\t\t\t//var viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (options.changeView && (this.currentView !== options.changeView)) {\r\n\t\t\t\tvar prevView = this.currentView;\r\n\t\t\t\tthis.currentView = options.changeView;\r\n\t\t\t\tthis.viewType = this.currentView.split('.')[0];\r\n\r\n\t\t\t\tthis._view = this._views[this.viewType];\r\n\r\n\t\t\t\t//this.setViewOptions(this.currentView);\r\n\r\n\t\t\t\tthis.$element.attr('data-currentview', this.currentView);\r\n\t\t\t\tthis.$element.attr('data-viewtype', this.viewType);\r\n\t\t\t\tviewChanged = true;\r\n\t\t\t\toptions.viewChanged = viewChanged;\r\n\r\n\t\t\t\tthis.$element.trigger('viewChanged.lark.repeater', this.currentView);\r\n\r\n\t\t\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t\t\tthis.infiniteScrolling(false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* lwf\r\n\t\t\t\tviewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\t\tif (viewTypeObj.selected) {\r\n\t\t\t\t\tviewTypeObj.selected.call(this, {\r\n\t\t\t\t\t\tprevView: prevView\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t\tthis._view.selected({\r\n\t\t\t\t\tprevView: prevView\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.syncViewButtonState();\r\n\r\n\t\t\toptions.preserve = (options.preserve !== undefined) ? options.preserve : !viewChanged;\r\n\t\t\tthis.clear(options);\r\n\r\n\t\t\tif (!this.infiniteScrollingEnabled || (this.infiniteScrollingEnabled && viewChanged)) {\r\n\t\t\t\t//this.$loader.show().loader('play');\r\n\t\t\t\tthis._throbber = this.throb({\r\n\t\t\t\t\tclassName : \"loader\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar dataOptions = this.getDataOptions(options);\r\n\r\n\t\t\tvar beforeRender = this.options.dataSource;\r\n\t\t\tvar repeaterPrototypeContext = this;\r\n\t\t\tvar viewTypeObj = this._view;\r\n\t\t\tbeforeRender(\r\n\t\t\t\tdataOptions,\r\n\t\t\t\t// this serves as a bridge function to pass all required data through to the actual function\r\n\t\t\t\t// that does the rendering for us.\r\n\t\t\t\tfunction callDoRender (dataSourceReturnedData) {\r\n\t\t\t\t\tdoRender.call(\r\n\t\t\t\t\t\trepeaterPrototypeContext,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdata: dataSourceReturnedData,\r\n\t\t\t\t\t\t\tdataOptions: dataOptions,\r\n\t\t\t\t\t\t\toptions: options,\r\n\t\t\t\t\t\t\tviewChanged: viewChanged,\r\n\t\t\t\t\t\t\tviewTypeObj: viewTypeObj\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tresize: function resize () {\r\n\t\t\tvar staticHeight = (this.options.staticHeight === -1) ? this.$element.attr('data-staticheight') : this.options.staticHeight;\r\n\t\t\tvar viewTypeObj = {};\r\n\t\t\tvar height;\r\n\t\t\tvar viewportMargins;\r\n\t\t\tvar scrubbedElements = [];\r\n\t\t\tvar previousProperties = [];\r\n\t\t\t//var $hiddenElements = this.$element.parentsUntil(':visible').addBack(); // del addBack() not supported by skyalrk\r\n\t\t\tvar $hiddenElements = this.$element.parentsUntil(':visible');\r\n\t\t\tvar currentHiddenElement;\r\n\t\t\tvar currentElementIndex = 0;\r\n\r\n\t\t\t// Set parents to 'display:block' until repeater is visible again\r\n\t\t\twhile (currentElementIndex < $hiddenElements.length && this.$element.is(':hidden')) {\r\n\t\t\t\tcurrentHiddenElement = $hiddenElements[currentElementIndex];\r\n\t\t\t\t// Only set display property on elements that are explicitly hidden (i.e. do not inherit it from their parent)\r\n\t\t\t\tif ($(currentHiddenElement).is(':hidden')) {\r\n\t\t\t\t\tpreviousProperties.push(currentHiddenElement.style['display']);\r\n\t\t\t\t\tcurrentHiddenElement.style['display'] = 'block';\r\n\t\t\t\t\tscrubbedElements.push(currentHiddenElement);\r\n\t\t\t\t}\r\n\t\t\t\tcurrentElementIndex++;\r\n\t\t\t}\r\n\r\n\t\t\t//if (this.viewType) {\r\n\t\t\t//\tviewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\t//}\r\n\r\n\t\t\tif (staticHeight !== undefined && staticHeight !== false && staticHeight !== 'false') {\r\n\t\t\t\tthis.$canvas.addClass('scrolling');\r\n\t\t\t\tviewportMargins = {\r\n\t\t\t\t\tbottom: this.$viewport.css('margin-bottom'),\r\n\t\t\t\t\ttop: this.$viewport.css('margin-top')\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar staticHeightValue = (staticHeight === 'true' || staticHeight === true) ? this.$element.height() : parseInt(staticHeight, 10);\r\n\t\t\t\tvar headerHeight = this.$element.find('.repeater-header').outerHeight();\r\n\t\t\t\tvar footerHeight = this.$element.find('.repeater-footer').outerHeight();\r\n\t\t\t\tvar bottomMargin = (viewportMargins.bottom === 'auto') ? 0 : parseInt(viewportMargins.bottom, 10);\r\n\t\t\t\tvar topMargin = (viewportMargins.top === 'auto') ? 0 : parseInt(viewportMargins.top, 10);\r\n\r\n\t\t\t\theight = staticHeightValue - headerHeight - footerHeight - bottomMargin - topMargin;\r\n\t\t\t\tthis.$viewport.outerHeight(height);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$canvas.removeClass('scrolling');\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t/* lwf\r\n\t\t\tif (viewTypeObj.resize) {\r\n\t\t\t\tviewTypeObj.resize.call(this, {\r\n\t\t\t\t\theight: this.$element.outerHeight(),\r\n\t\t\t\t\twidth: this.$element.outerWidth()\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif (this._view) {\r\n\t\t\t\tthis._view.resize({\r\n\t\t\t\t\theight: this.$element.outerHeight(),\r\n\t\t\t\t\twidth: this.$element.outerWidth()\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tscrubbedElements.forEach(function (element, i) {\r\n\t\t\t\telement.style['display'] = previousProperties[i];\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// e.g. \"Rows\" or \"Thumbnails\"\r\n\t\trenderItems: function renderItems (viewTypeObj, data, callback) {\r\n\t\t\tif (!viewTypeObj.render) {\r\n\t\t\t\tif (viewTypeObj.before) {\r\n\t\t\t\t\tvar addBefore = viewTypeObj.before({\r\n\t\t\t\t\t\tcontainer: this.$canvas,\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t});\r\n\t\t\t\t\taddItem(this.$canvas, addBefore);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar $dataContainer = this.$canvas.find('[data-container=\"true\"]:last');\r\n\t\t\t\tvar $container = ($dataContainer.length > 0) ? $dataContainer : this.$canvas;\r\n\r\n\t\t\t\t// It appears that the following code would theoretically allow you to pass a deeply\r\n\t\t\t\t// nested value to \"repeat on\" to be added to the repeater.\r\n\t\t\t\t// eg. `data.foo.bar.items`\r\n\t\t\t\tif (viewTypeObj.renderItem) {\r\n\t\t\t\t\tvar subset;\r\n\t\t\t\t\tvar objectAndPropsToRepeatOnString = viewTypeObj.repeat || 'data.items';\r\n\t\t\t\t\tvar objectAndPropsToRepeatOn = objectAndPropsToRepeatOnString.split('.');\r\n\t\t\t\t\tvar objectToRepeatOn = objectAndPropsToRepeatOn[0];\r\n\r\n\t\t\t\t\tif (objectToRepeatOn === 'data' || objectToRepeatOn === 'this') {\r\n\t\t\t\t\t\tsubset = (objectToRepeatOn === 'this') ? this : data;\r\n\r\n\t\t\t\t\t\t// Extracts subset from object chain (get `items` out of `foo.bar.items`). I think....\r\n\t\t\t\t\t\tvar propsToRepeatOn = objectAndPropsToRepeatOn.slice(1);\r\n\t\t\t\t\t\tfor (var prop = 0; prop < propsToRepeatOn.length; prop++) {\r\n\t\t\t\t\t\t\tif (subset[propsToRepeatOn[prop]] !== undefined) {\r\n\t\t\t\t\t\t\t\tsubset = subset[propsToRepeatOn[prop]];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsubset = [];\r\n\t\t\t\t\t\t\t\tlogWarn('WARNING: Repeater unable to find property to iterate renderItem on.');\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var subItemIndex = 0; subItemIndex < subset.length; subItemIndex++) {\r\n\t\t\t\t\t\t\tvar addSubItem = viewTypeObj.renderItem({\r\n\t\t\t\t\t\t\t\tcontainer: $container,\r\n\t\t\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\t\t\tindex: subItemIndex,\r\n\t\t\t\t\t\t\t\tsubset: subset\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\taddItem($container, addSubItem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlogWarn('WARNING: Repeater plugin \"repeat\" value must start with either \"data\" or \"this\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (viewTypeObj.after) {\r\n\t\t\t\t\tvar addAfter = viewTypeObj.after({\r\n\t\t\t\t\t\tcontainer: this.$canvas,\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t});\r\n\t\t\t\t\taddItem(this.$canvas, addAfter);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcallback(data);\r\n\t\t\t} else {\r\n\t\t\t\tviewTypeObj.render({\r\n\t\t\t\t\tcontainer: this.$canvas,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t}, callback);\r\n\t\t\t\tcallback(data);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/* // by lwf\r\n\t\tsetViewOptions: function setViewOptions (curView) {\r\n\t\t\tvar opts = {};\r\n\t\t\tvar viewName = curView.split('.')[1];\r\n\r\n\t\t\tif (this.options.views) {\r\n\t\t\t\topts = this.options.views[viewName] || this.options.views[curView] || {};\r\n\t\t\t} else {\r\n\t\t\t\topts = {};\r\n\t\t\t}\r\n\r\n\t\t\tthis.viewOptions = langx.mixin({}, this.options, opts);\r\n\t\t},\r\n\t\t*/\r\n\t\tviewChanged: function viewChanged (e) {\r\n\t\t\tvar $selected = $(e.target);\r\n\t\t\tvar val = $selected.val();\r\n\r\n\t\t\tif (!this.syncingViewButtonState) {\r\n\t\t\t\tif (this.isDisabled || $selected.parents('label:first').hasClass('disabled')) {\r\n\t\t\t\t\tthis.syncViewButtonState();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render({\r\n\t\t\t\t\t\tchangeView: val,\r\n\t\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsyncViewButtonState: function syncViewButtonState () {\r\n\t\t\tvar $itemToCheck = this.$views.find('input[value=\"' + this.currentView + '\"]');\r\n\r\n\t\t\tthis.syncingViewButtonState = true;\r\n\t\t\tthis.$views.find('input').prop('checked', false);\r\n\t\t\tthis.$views.find('label.active').removeClass('active');\r\n\r\n\t\t\tif ($itemToCheck.length > 0) {\r\n\t\t\t\t$itemToCheck.prop('checked', true);\r\n\t\t\t\t$itemToCheck.parents('label:first').addClass('active');\r\n\t\t\t}\r\n\t\t\tthis.syncingViewButtonState = false;\r\n\t\t},\r\n\r\n\t\tgetNestedProperty: function (obj, property) {\r\n\t\t\tproperty.replace(\r\n\t\t\t\t// Matches native JavaScript notation in a String,\r\n\t\t\t\t// e.g. '[\"doubleQuoteProp\"].dotProp[2]'\r\n\t\t\t\t// eslint-disable-next-line no-useless-escape\r\n\t\t\t\t/\\[(?:'([^']+)'|\"([^\"]+)\"|(\\d+))\\]|(?:(?:^|\\.)([^\\.\\[]+))/g,\r\n\t\t\t\tfunction (str, singleQuoteProp, doubleQuoteProp, arrayIndex, dotProp) {\r\n\t\t\t\t\tvar prop =\r\n\t\t\t\t\t\tdotProp ||\r\n\t\t\t\t\t\tsingleQuoteProp ||\r\n\t\t\t\t\t\tdoubleQuoteProp ||\r\n\t\t\t\t\t\t(arrayIndex && parseInt(arrayIndex, 10))\r\n\t\t\t\t\tif (str && obj) {\r\n\t\t\t\t\t\tobj = obj[prop]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn obj\r\n\t\t},\r\n\r\n\t\tgetDataProperty: function (obj, property) {\r\n\t\t\tvar key\r\n\t\t\tvar prop\r\n\t\t\tif (obj.dataset) {\r\n\t\t\t\tkey = property.replace(/-([a-z])/g, function (_, b) {\r\n\t\t\t\t\treturn b.toUpperCase()\r\n\t\t\t\t})\r\n\t\t\t\tprop = obj.dataset[key]\r\n\t\t\t} else if (obj.getAttribute) {\r\n\t\t\t\tprop = obj.getAttribute(\r\n\t\t\t\t\t'data-' + property.replace(/([A-Z])/g, '-$1').toLowerCase()\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tif (typeof prop === 'string') {\r\n\t\t\t\t// eslint-disable-next-line no-useless-escape\r\n\t\t\t\tif (\r\n\t\t\t\t\t/^(true|false|null|-?\\d+(\\.\\d+)?|\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/.test(prop)\r\n\t\t\t\t) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn $.parseJSON(prop)\r\n\t\t\t\t\t} catch (ignore) {}\r\n\t\t\t\t}\r\n\t\t\t\treturn prop\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetItemProperty: function (obj, property) {\r\n\t\t\tvar prop = this.getDataProperty(obj, property)\r\n\t\t\tif (prop === undefined) {\r\n\t\t\t\tprop = obj[property]\r\n\t\t\t}\r\n\t\t\tif (prop === undefined) {\r\n\t\t\t\tprop = this.getNestedProperty(obj, property)\r\n\t\t\t}\r\n\t\t\treturn prop\r\n\t\t}\r\n\r\n\t\t\r\n\t});\r\n\r\n\tvar logWarn = function logWarn (msg) {\r\n\t\tif (window.console && window.console.warn) {\r\n\t\t\twindow.console.warn(msg);\r\n\t\t}\r\n\t};\r\n\r\n\tvar scan = function scan (cont) {\r\n\t\tvar keep = [];\r\n\t\tcont.children().each(function eachContainerChild () {\r\n\t\t\tvar item = $(this);\r\n\t\t\tvar pres = item.attr('data-preserve');\r\n\t\t\tif (pres === 'deep') {\r\n\t\t\t\titem.detach();\r\n\t\t\t\tkeep.push(item);\r\n\t\t\t} else if (pres === 'shallow') {\r\n\t\t\t\tscan(item);\r\n\t\t\t\titem.detach();\r\n\t\t\t\tkeep.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tcont.empty();\r\n\t\tcont.append(keep);\r\n\t};\r\n\r\n\tvar addItem = function addItem ($parent, response) {\r\n\t\tvar action;\r\n\t\tif (response) {\r\n\t\t\taction = (response.action) ? response.action : 'append';\r\n\t\t\tif (action !== 'none' && response.item !== undefined) {\r\n\t\t\t\tvar $container = (response.container !== undefined) ? $(response.container) : $parent;\r\n\t\t\t\t$container[action](response.item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar callNextInit = function callNextInit (currentViewType, viewTypes, callback) {\r\n\t\tvar nextViewType = currentViewType + 1;\r\n\t\tif (nextViewType < viewTypes.length) {\r\n\t\t\tinitViewType.call(this, nextViewType, viewTypes, callback);\r\n\t\t} else {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t};\r\n\r\n\tvar initViewType = function initViewType (currentViewtype, viewTypes, callback) {\r\n\t\tif (viewTypes[currentViewtype].initialize) {\r\n\t\t\tviewTypes[currentViewtype].initialize.call(this, {}, function afterInitialize () {\r\n\t\t\t\tcallNextInit.call(this, currentViewtype, viewTypes, callback);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcallNextInit.call(this, currentViewtype, viewTypes, callback);\r\n\t\t}\r\n\t};\r\n\r\n\t// Does all of our cleanup post-render\r\n\tvar afterRender = function afterRender (state) {\r\n\t\tvar data = state.data || {};\r\n\r\n\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\tif (state.viewChanged || state.options.clearInfinite) {\r\n\t\t\t\tthis.initInfiniteScrolling();\r\n\t\t\t}\r\n\r\n\t\t\tthis.infiniteScrollPaging(data, state.options);\r\n\t\t}\r\n\r\n\t\t//this.$loader.hide().loader('pause');\r\n\t\tif (this._throbber) {\r\n\t\t\tthis._throbber.remove();\r\n\t\t\tthis._throbber = null;\r\n\t\t}\r\n\t\tthis.enable();\r\n\r\n\t\tthis.$search.trigger('rendered.lark.repeater', {\r\n\t\t\tdata: data,\r\n\t\t\toptions: state.dataOptions,\r\n\t\t\trenderOptions: state.options\r\n\t\t});\r\n\t\tthis.$element.trigger('rendered.lark.repeater', {\r\n\t\t\tdata: data,\r\n\t\t\toptions: state.dataOptions,\r\n\t\t\trenderOptions: state.options\r\n\t\t});\r\n\r\n\t\t// for maintaining support of 'loaded' event\r\n\t\tthis.$element.trigger('loaded.lark.repeater', state.dataOptions);\r\n\t};\r\n\r\n\t// This does the actual rendering of the repeater\r\n\tvar doRender = function doRender (state) {\r\n\t\tvar data = state.data || {};\r\n\r\n\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t// pass empty object because data handled in infiniteScrollPaging method\r\n\t\t\tthis.infiniteScrollingCallback({});\r\n\t\t} else {\r\n\t\t\tthis.itemization(data);\r\n\t\t\tthis.pagination(data);\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tthis.renderItems(\r\n\t\t\tstate.viewTypeObj,\r\n\t\t\tdata,\r\n\t\t\tfunction callAfterRender (d) {\r\n\t\t\t\tstate.data = d;\r\n\t\t\t\tafterRender.call(self, state);\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\tRepeater.addons = {};\r\n\r\n\r\n\treturn skylark.attach(\"widgets.Repeater\",Repeater);\r\n\r\n});\r\n"]}